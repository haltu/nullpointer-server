{"version":3,"sources":["scripts/app-b53a5305e9.js"],"names":["angular","module","factory","define","amd","exports","require","jQuery","$","widget_uuid","widget_slice","Array","prototype","slice","cleanData","orig","elems","events","elem","i","_data","remove","triggerHandler","e","widget","name","base","fullName","existingConstructor","constructor","basePrototype","proxiedPrototype","namespace","split","Widget","expr","toLowerCase","data","options","element","this","_createWidget","arguments","length","extend","version","_proto","_childConstructors","each","prop","value","isFunction","_super","apply","_superApply","args","returnValue","__super","__superApply","widgetEventPrefix","widgetName","widgetFullName","child","childPrototype","push","bridge","target","key","input","call","inputIndex","inputLength","hasOwnProperty","undefined","isPlainObject","object","fn","isMethodCall","methodValue","instance","charAt","jquery","pushStack","get","error","concat","option","_init","defaultElement","disabled","create","uuid","eventNamespace","bindings","hoverable","focusable","_on","event","destroy","document","style","ownerDocument","window","defaultView","parentWindow","_getCreateOptions","_create","_trigger","_getCreateEventData","noop","_destroy","unbind","removeData","camelCase","removeAttr","removeClass","parts","curOption","shift","pop","_setOptions","_setOption","toggleClass","enable","disable","suppressDisabledCheck","handlers","delegateElement","add","handler","handlerProxy","hasClass","guid","match","eventName","selector","delegate","bind","_off","join","undelegate","not","_delay","delay","setTimeout","_hoverable","mouseenter","currentTarget","addClass","mouseleave","_focusable","focusin","focusout","type","callback","Event","originalEvent","trigger","isDefaultPrevented","show","hide","method","defaultEffect","effect","hasOptions","effectName","duration","isEmptyObject","complete","effects","easing","queue","next","getDragHandler","isDragOver","dataTransfer","inArray","types","delegatedEvent","preventDefault","dropEffect","support","fileInput","RegExp","test","navigator","userAgent","xhrFileUpload","ProgressEvent","FileReader","xhrFormDataFileUpload","FormData","blobSlice","Blob","webkitSlice","mozSlice","dropZone","pasteZone","replaceFileInput","paramName","singleFileUploads","limitMultiFileUploads","limitMultiFileUploadSize","limitMultiFileUploadSizeOverhead","sequentialUploads","limitConcurrentUploads","forceIframeTransport","redirect","redirectParamName","postMessage","multipart","maxChunkSize","uploadedBytes","recalculateProgress","progressInterval","bitrateInterval","autoUpload","messages","i18n","message","context","toString","replace","formData","form","serializeArray","fileupload","process","done","submit","processData","contentType","cache","timeout","_specialOptions","_blobSlice","_BitrateTimer","timestamp","Date","now","getTime","loaded","bitrate","getBitrate","interval","timeDiff","_isXHRUpload","_getFormData","isArray","_getTotal","files","total","index","file","size","_initProgressObject","obj","progress","_progress","_initResponseObject","_response","_onProgress","lengthComputable","_time","Math","floor","chunkSize","_bitrateTimer","_initProgressListener","that","xhr","ajaxSettings","upload","oe","_isInstanceOf","Object","_initXHRData","headers","contentRange","blob","encodeURI","field","append","uploadName","_initIframeSettings","targetHost","url","dataType","location","host","_initDataSettings","_chunkedUpload","_getParamName","_initFormSettings","href","toUpperCase","formAcceptCharset","attr","_getAJAXSettings","_getDeferredState","deferred","state","isResolved","isRejected","_enhancePromise","promise","success","fail","always","_getXHRPromise","resolveOrReject","dfd","Deferred","resolveWith","rejectWith","abort","_addConvenienceMethods","getPromise","resolveFunc","rejectFunc","_processQueue","pipe","errorThrown","jqXHR","_onSend","processing","response","_getUploadedBytes","range","getResponseHeader","upperBytesPos","parseInt","testOnly","fs","ub","mcs","o","currentLoaded","ajax","result","textStatus","_beforeSend","_active","_onDone","_onFail","_onAlways","jqXHRorResult","jqXHRorError","aborted","slot","send","_sending","nextSlot","_slots","resolve","_sequence","_onAdd","paramNameSet","paramNameSlice","fileSet","filesLength","limit","limitSize","overhead","batchSize","j","originalFiles","newData","_replaceFileInput","inputClone","clone","restoreFocus","is","activeElement","fileInputClone","reset","after","detach","focus","map","el","_handleFileTreeEntry","entry","path","dirReader","errorHandler","successHandler","entries","_handleFileTreeEntries","readEntries","results","isFile","_file","relativePath","isDirectory","createReader","when","_getDroppedFiles","items","webkitGetAsEntry","getAsEntry","item","getAsFile","makeArray","_getSingleFileInputFiles","fileName","fileSize","_getFileInputFiles","_onChange","_onPaste","clipboardData","_onDrop","_onDragOver","_onDragEnter","_onDragLeave","_initEventHandlers","dragover","drop","dragenter","dragleave","paste","change","_destroyEventHandlers","reinit","_initSpecialOptions","find","_getRegExp","str","modifiers","_isRegExpOption","_initDataAttributes","attributes","active","reject","then","acmeMalarkey","malarkey","linkFunc","scope","vm","watcher","typist","typeSpeed","deleteSpeed","pauseDelay","loop","postfix","forEach","extraValues","pause","$watch","contributors","contributor","login","$on","MalarkeyController","$log","githubContributor","activate","getContributors","info","directive","restrict","template","link","controller","controllerAs","$inject","counter","ajaxTransport","async","iframe","addParamChar","initialIframeSrc","_","completeCallback","fileInputClones","paramNames","contents","firstChild","Error","appendTo","val","replaceWith","body","ajaxSetup","converters","iframe text","text","iframe json","parseJSON","iframe html","html","iframe xml","xmlDoc","isXMLDoc","parseXML","XMLDocument","xml","iframe script","globalEval","acmeNavbar","NavbarController","moment","User","Authentication","$mdSidenav","getLogin","user","getCurrentUser","toggleSidenav","toggle","getUsername","username","relativeDate","creationDate","fromNow","title","templateUrl","bindToController","sideNav","SideNavController","webDevTec","getWebDevTec","sidenav","modules","getTec","closeNav","close","debug","getModules","description","icon","service","constant","config","$logProvider","$mdThemingProvider","toastrConfig","debugEnabled","theme","primaryPalette","accentPalette","backgroundPalette","dark","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","routeConfig","$routeProvider","otherwise","redirectTo","runBlock","run","AccountController","$scope","$location","loggedAs","$get","console","log","dir","logout","updateUser","DevicesController","Device","MediaTypes","Notification","updateDevice","device","playlistId","reqParams","playlist","$update","notifier","showSuccess","showFailure","clearSelections","selectedDevice","selectedPlaylist","deviceMap","playlistMap","errorMessage","createNotifier","getDevices","$promise","devices","id","getPlaylists","playlists","media_schedule_json","JSON","parse","mediaTypes","newValue","oldValue","refreshConfirmed","confirmed_playlist","confirmed_playlist_update_time","isConfirmed","updated","setDevicePlaylist","LoginController","password","MainController","$timeout","toastr","classAnimation","showToastr","MediaController","$cookieStore","Media","BASE_URL","calculate_md5","chunk_size","onload","spark","current_chunk","chunks","read_next_chunk","md5","end","reader","start","min","readAsArrayBuffer","File","ceil","SparkMD5","ArrayBuffer","loading","allMedia","visibilities","I","V","W","visibleMedia","getVisibleMedia","filter","media","media_type","getMedia","removeMedia","m","externalMedia","addExternalMedia","addedMedia","save","notifer","openFileBrowser","getElementById","click","form_data","xhrFields","withCredentials","beforeSend","setRequestHeader","token","splice","chunkdone","upload_id","PlaylistDetailController","$routeParams","Playlist","addToPlaylist","time","media_schedule","savePlaylist","updatedPlaylist","copy","stringify","update","indexOf","jsonSchedule","deletePlaylist","answer","confirm","PlaylistController","createNewPlaylist","newPl","editPlaylist","AuthenticationFactory","$http","$window","Login","post","currentUser","sessionStorage","setItem","userHolder","defaults","common","Authorization","Logout","GetCurrentUser","sessionUser","getItem","authentication","DeviceFactory","$resource","StatisticsFactory","MediaFactory","MediaTypesFactory","label","fieldName","labelFor","fieldNameFor","NotificationFactory","fadeTime","visibility","failure","showMessage","struct","hideMessage","isVisible","isSuccessVisible","isFailureVisible","hideSuccess","hideFailure","getMessage","getSuccessMessage","getFailureMessage","PlaylistFactory","UserFactory","resource","query","StatsController","Statistics","getAndCacheStats","stats","statMap","getSelectedStats","getStatTypeString","stat","ToastController","$mdToast","closeToast","$templateCache","put"],"mappings":"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","file":"scripts/app-b53a5305e9.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp',\r\n    [\r\n      'ngAnimate',\r\n      'ngCookies',\r\n      'ngTouch',\r\n      'ngSanitize',\r\n      'ngMessages',\r\n      'ngAria',\r\n      'ngResource',\r\n      'ngRoute',\r\n      'ngMaterial',\r\n      'toastr',\r\n      'ngResource',\r\n      'ui.sortable',\r\n      'md.data.table']);\r\n\r\n})();\r\n\n/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28\r\n* http://jqueryui.com\r\n* Includes: widget.js\r\n* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */\r\n\r\n(function( factory ) {\r\n\tif ( typeof define === \"function\" && define.amd ) {\r\n\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine([ \"jquery\" ], factory );\r\n\r\n\t} else if ( typeof exports === \"object\" ) {\r\n\r\n\t\t// Node/CommonJS\r\n\t\tfactory( require( \"jquery\" ) );\r\n\r\n\t} else {\r\n\r\n\t\t// Browser globals\r\n\t\tfactory( jQuery );\r\n\t}\r\n}(function( $ ) {\r\n/*!\r\n * jQuery UI Widget 1.11.4\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n *\r\n * http://api.jqueryui.com/jQuery.widget/\r\n */\r\n\r\n\r\nvar widget_uuid = 0,\r\n\twidget_slice = Array.prototype.slice;\r\n\r\n$.cleanData = (function( orig ) {\r\n\treturn function( elems ) {\r\n\t\tvar events, elem, i;\r\n\t\tfor ( i = 0; (elem = elems[i]) != null; i++ ) {\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// Only trigger remove when necessary to save time\r\n\t\t\t\tevents = $._data( elem, \"events\" );\r\n\t\t\t\tif ( events && events.remove ) {\r\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\r\n\t\t\t\t}\r\n\r\n\t\t\t// http://bugs.jquery.com/ticket/8235\r\n\t\t\t} catch ( e ) {}\r\n\t\t}\r\n\t\torig( elems );\r\n\t};\r\n})( $.cleanData );\r\n\r\n$.widget = function( name, base, prototype ) {\r\n\tvar fullName, existingConstructor, constructor, basePrototype,\r\n\t\t// proxiedPrototype allows the provided prototype to remain unmodified\r\n\t\t// so that it can be used as a mixin for multiple widgets (#8876)\r\n\t\tproxiedPrototype = {},\r\n\t\tnamespace = name.split( \".\" )[ 0 ];\r\n\r\n\tname = name.split( \".\" )[ 1 ];\r\n\tfullName = namespace + \"-\" + name;\r\n\r\n\tif ( !prototype ) {\r\n\t\tprototype = base;\r\n\t\tbase = $.Widget;\r\n\t}\r\n\r\n\t// create selector for plugin\r\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\r\n\t\treturn !!$.data( elem, fullName );\r\n\t};\r\n\r\n\t$[ namespace ] = $[ namespace ] || {};\r\n\texistingConstructor = $[ namespace ][ name ];\r\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\r\n\t\t// allow instantiation without \"new\" keyword\r\n\t\tif ( !this._createWidget ) {\r\n\t\t\treturn new constructor( options, element );\r\n\t\t}\r\n\r\n\t\t// allow instantiation without initializing for simple inheritance\r\n\t\t// must use \"new\" keyword (the code above always passes args)\r\n\t\tif ( arguments.length ) {\r\n\t\t\tthis._createWidget( options, element );\r\n\t\t}\r\n\t};\r\n\t// extend with the existing constructor to carry over any static properties\r\n\t$.extend( constructor, existingConstructor, {\r\n\t\tversion: prototype.version,\r\n\t\t// copy the object used to create the prototype in case we need to\r\n\t\t// redefine the widget later\r\n\t\t_proto: $.extend( {}, prototype ),\r\n\t\t// track widgets that inherit from this widget in case this widget is\r\n\t\t// redefined after a widget inherits from it\r\n\t\t_childConstructors: []\r\n\t});\r\n\r\n\tbasePrototype = new base();\r\n\t// we need to make the options hash a property directly on the new instance\r\n\t// otherwise we'll modify the options hash on the prototype that we're\r\n\t// inheriting from\r\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\r\n\t$.each( prototype, function( prop, value ) {\r\n\t\tif ( !$.isFunction( value ) ) {\r\n\t\t\tproxiedPrototype[ prop ] = value;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tproxiedPrototype[ prop ] = (function() {\r\n\t\t\tvar _super = function() {\r\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\r\n\t\t\t\t},\r\n\t\t\t\t_superApply = function( args ) {\r\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, args );\r\n\t\t\t\t};\r\n\t\t\treturn function() {\r\n\t\t\t\tvar __super = this._super,\r\n\t\t\t\t\t__superApply = this._superApply,\r\n\t\t\t\t\treturnValue;\r\n\r\n\t\t\t\tthis._super = _super;\r\n\t\t\t\tthis._superApply = _superApply;\r\n\r\n\t\t\t\treturnValue = value.apply( this, arguments );\r\n\r\n\t\t\t\tthis._super = __super;\r\n\t\t\t\tthis._superApply = __superApply;\r\n\r\n\t\t\t\treturn returnValue;\r\n\t\t\t};\r\n\t\t})();\r\n\t});\r\n\tconstructor.prototype = $.widget.extend( basePrototype, {\r\n\t\t// TODO: remove support for widgetEventPrefix\r\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\r\n\t\t// don't prefix for widgets that aren't DOM-based\r\n\t\twidgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\r\n\t}, proxiedPrototype, {\r\n\t\tconstructor: constructor,\r\n\t\tnamespace: namespace,\r\n\t\twidgetName: name,\r\n\t\twidgetFullName: fullName\r\n\t});\r\n\r\n\t// If this widget is being redefined then we need to find all widgets that\r\n\t// are inheriting from it and redefine all of them so that they inherit from\r\n\t// the new version of this widget. We're essentially trying to replace one\r\n\t// level in the prototype chain.\r\n\tif ( existingConstructor ) {\r\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\r\n\t\t\tvar childPrototype = child.prototype;\r\n\r\n\t\t\t// redefine the child widget using the same prototype that was\r\n\t\t\t// originally used, but inherit from the new version of the base\r\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\r\n\t\t});\r\n\t\t// remove the list of existing child constructors from the old constructor\r\n\t\t// so the old child constructors can be garbage collected\r\n\t\tdelete existingConstructor._childConstructors;\r\n\t} else {\r\n\t\tbase._childConstructors.push( constructor );\r\n\t}\r\n\r\n\t$.widget.bridge( name, constructor );\r\n\r\n\treturn constructor;\r\n};\r\n\r\n$.widget.extend = function( target ) {\r\n\tvar input = widget_slice.call( arguments, 1 ),\r\n\t\tinputIndex = 0,\r\n\t\tinputLength = input.length,\r\n\t\tkey,\r\n\t\tvalue;\r\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\r\n\t\tfor ( key in input[ inputIndex ] ) {\r\n\t\t\tvalue = input[ inputIndex ][ key ];\r\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\r\n\t\t\t\t// Clone objects\r\n\t\t\t\tif ( $.isPlainObject( value ) ) {\r\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\r\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\r\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\r\n\t\t\t\t\t\t$.widget.extend( {}, value );\r\n\t\t\t\t// Copy everything else by reference\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[ key ] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n};\r\n\r\n$.widget.bridge = function( name, object ) {\r\n\tvar fullName = object.prototype.widgetFullName || name;\r\n\t$.fn[ name ] = function( options ) {\r\n\t\tvar isMethodCall = typeof options === \"string\",\r\n\t\t\targs = widget_slice.call( arguments, 1 ),\r\n\t\t\treturnValue = this;\r\n\r\n\t\tif ( isMethodCall ) {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar methodValue,\r\n\t\t\t\t\tinstance = $.data( this, fullName );\r\n\t\t\t\tif ( options === \"instance\" ) {\r\n\t\t\t\t\treturnValue = instance;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif ( !instance ) {\r\n\t\t\t\t\treturn $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\r\n\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\r\n\t\t\t\t}\r\n\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\r\n\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\r\n\t\t\t\t}\r\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\r\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\r\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\r\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\r\n\t\t\t\t\t\tmethodValue;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\r\n\t\t\t// Allow multiple hashes to be passed on init\r\n\t\t\tif ( args.length ) {\r\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat(args) );\r\n\t\t\t}\r\n\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data( this, fullName );\r\n\t\t\t\tif ( instance ) {\r\n\t\t\t\t\tinstance.option( options || {} );\r\n\t\t\t\t\tif ( instance._init ) {\r\n\t\t\t\t\t\tinstance._init();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn returnValue;\r\n\t};\r\n};\r\n\r\n$.Widget = function( /* options, element */ ) {};\r\n$.Widget._childConstructors = [];\r\n\r\n$.Widget.prototype = {\r\n\twidgetName: \"widget\",\r\n\twidgetEventPrefix: \"\",\r\n\tdefaultElement: \"<div>\",\r\n\toptions: {\r\n\t\tdisabled: false,\r\n\r\n\t\t// callbacks\r\n\t\tcreate: null\r\n\t},\r\n\t_createWidget: function( options, element ) {\r\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\r\n\t\tthis.element = $( element );\r\n\t\tthis.uuid = widget_uuid++;\r\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\r\n\r\n\t\tthis.bindings = $();\r\n\t\tthis.hoverable = $();\r\n\t\tthis.focusable = $();\r\n\r\n\t\tif ( element !== this ) {\r\n\t\t\t$.data( element, this.widgetFullName, this );\r\n\t\t\tthis._on( true, this.element, {\r\n\t\t\t\tremove: function( event ) {\r\n\t\t\t\t\tif ( event.target === element ) {\r\n\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.document = $( element.style ?\r\n\t\t\t\t// element within the document\r\n\t\t\t\telement.ownerDocument :\r\n\t\t\t\t// element is window or document\r\n\t\t\t\telement.document || element );\r\n\t\t\tthis.window = $( this.document[0].defaultView || this.document[0].parentWindow );\r\n\t\t}\r\n\r\n\t\tthis.options = $.widget.extend( {},\r\n\t\t\tthis.options,\r\n\t\t\tthis._getCreateOptions(),\r\n\t\t\toptions );\r\n\r\n\t\tthis._create();\r\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\r\n\t\tthis._init();\r\n\t},\r\n\t_getCreateOptions: $.noop,\r\n\t_getCreateEventData: $.noop,\r\n\t_create: $.noop,\r\n\t_init: $.noop,\r\n\r\n\tdestroy: function() {\r\n\t\tthis._destroy();\r\n\t\t// we can probably remove the unbind calls in 2.0\r\n\t\t// all event bindings should go through this._on()\r\n\t\tthis.element\r\n\t\t\t.unbind( this.eventNamespace )\r\n\t\t\t.removeData( this.widgetFullName )\r\n\t\t\t// support: jquery <1.6.3\r\n\t\t\t// http://bugs.jquery.com/ticket/9413\r\n\t\t\t.removeData( $.camelCase( this.widgetFullName ) );\r\n\t\tthis.widget()\r\n\t\t\t.unbind( this.eventNamespace )\r\n\t\t\t.removeAttr( \"aria-disabled\" )\r\n\t\t\t.removeClass(\r\n\t\t\t\tthis.widgetFullName + \"-disabled \" +\r\n\t\t\t\t\"ui-state-disabled\" );\r\n\r\n\t\t// clean up events and states\r\n\t\tthis.bindings.unbind( this.eventNamespace );\r\n\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\r\n\t\tthis.focusable.removeClass( \"ui-state-focus\" );\r\n\t},\r\n\t_destroy: $.noop,\r\n\r\n\twidget: function() {\r\n\t\treturn this.element;\r\n\t},\r\n\r\n\toption: function( key, value ) {\r\n\t\tvar options = key,\r\n\t\t\tparts,\r\n\t\t\tcurOption,\r\n\t\t\ti;\r\n\r\n\t\tif ( arguments.length === 0 ) {\r\n\t\t\t// don't return a reference to the internal hash\r\n\t\t\treturn $.widget.extend( {}, this.options );\r\n\t\t}\r\n\r\n\t\tif ( typeof key === \"string\" ) {\r\n\t\t\t// handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\r\n\t\t\toptions = {};\r\n\t\t\tparts = key.split( \".\" );\r\n\t\t\tkey = parts.shift();\r\n\t\t\tif ( parts.length ) {\r\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\r\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\r\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\r\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\r\n\t\t\t\t}\r\n\t\t\t\tkey = parts.pop();\r\n\t\t\t\tif ( arguments.length === 1 ) {\r\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\r\n\t\t\t\t}\r\n\t\t\t\tcurOption[ key ] = value;\r\n\t\t\t} else {\r\n\t\t\t\tif ( arguments.length === 1 ) {\r\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\r\n\t\t\t\t}\r\n\t\t\t\toptions[ key ] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._setOptions( options );\r\n\r\n\t\treturn this;\r\n\t},\r\n\t_setOptions: function( options ) {\r\n\t\tvar key;\r\n\r\n\t\tfor ( key in options ) {\r\n\t\t\tthis._setOption( key, options[ key ] );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\t_setOption: function( key, value ) {\r\n\t\tthis.options[ key ] = value;\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis.widget()\r\n\t\t\t\t.toggleClass( this.widgetFullName + \"-disabled\", !!value );\r\n\r\n\t\t\t// If the widget is becoming disabled, then nothing is interactive\r\n\t\t\tif ( value ) {\r\n\t\t\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\r\n\t\t\t\tthis.focusable.removeClass( \"ui-state-focus\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tenable: function() {\r\n\t\treturn this._setOptions({ disabled: false });\r\n\t},\r\n\tdisable: function() {\r\n\t\treturn this._setOptions({ disabled: true });\r\n\t},\r\n\r\n\t_on: function( suppressDisabledCheck, element, handlers ) {\r\n\t\tvar delegateElement,\r\n\t\t\tinstance = this;\r\n\r\n\t\t// no suppressDisabledCheck flag, shuffle arguments\r\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\r\n\t\t\thandlers = element;\r\n\t\t\telement = suppressDisabledCheck;\r\n\t\t\tsuppressDisabledCheck = false;\r\n\t\t}\r\n\r\n\t\t// no element argument, shuffle and use this.element\r\n\t\tif ( !handlers ) {\r\n\t\t\thandlers = element;\r\n\t\t\telement = this.element;\r\n\t\t\tdelegateElement = this.widget();\r\n\t\t} else {\r\n\t\t\telement = delegateElement = $( element );\r\n\t\t\tthis.bindings = this.bindings.add( element );\r\n\t\t}\r\n\r\n\t\t$.each( handlers, function( event, handler ) {\r\n\t\t\tfunction handlerProxy() {\r\n\t\t\t\t// allow widgets to customize the disabled handling\r\n\t\t\t\t// - disabled as an array instead of boolean\r\n\t\t\t\t// - disabled class as method for disabling individual parts\r\n\t\t\t\tif ( !suppressDisabledCheck &&\r\n\t\t\t\t\t\t( instance.options.disabled === true ||\r\n\t\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\r\n\t\t\t\t\t.apply( instance, arguments );\r\n\t\t\t}\r\n\r\n\t\t\t// copy the guid so direct unbinding works\r\n\t\t\tif ( typeof handler !== \"string\" ) {\r\n\t\t\t\thandlerProxy.guid = handler.guid =\r\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\r\n\t\t\t}\r\n\r\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ ),\r\n\t\t\t\teventName = match[1] + instance.eventNamespace,\r\n\t\t\t\tselector = match[2];\r\n\t\t\tif ( selector ) {\r\n\t\t\t\tdelegateElement.delegate( selector, eventName, handlerProxy );\r\n\t\t\t} else {\r\n\t\t\t\telement.bind( eventName, handlerProxy );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_off: function( element, eventName ) {\r\n\t\teventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) +\r\n\t\t\tthis.eventNamespace;\r\n\t\telement.unbind( eventName ).undelegate( eventName );\r\n\r\n\t\t// Clear the stack to avoid memory leaks (#10056)\r\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\r\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\r\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\r\n\t},\r\n\r\n\t_delay: function( handler, delay ) {\r\n\t\tfunction handlerProxy() {\r\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\r\n\t\t\t\t.apply( instance, arguments );\r\n\t\t}\r\n\t\tvar instance = this;\r\n\t\treturn setTimeout( handlerProxy, delay || 0 );\r\n\t},\r\n\r\n\t_hoverable: function( element ) {\r\n\t\tthis.hoverable = this.hoverable.add( element );\r\n\t\tthis._on( element, {\r\n\t\t\tmouseenter: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-hover\" );\r\n\t\t\t},\r\n\t\t\tmouseleave: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-hover\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_focusable: function( element ) {\r\n\t\tthis.focusable = this.focusable.add( element );\r\n\t\tthis._on( element, {\r\n\t\t\tfocusin: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-focus\" );\r\n\t\t\t},\r\n\t\t\tfocusout: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-focus\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_trigger: function( type, event, data ) {\r\n\t\tvar prop, orig,\r\n\t\t\tcallback = this.options[ type ];\r\n\r\n\t\tdata = data || {};\r\n\t\tevent = $.Event( event );\r\n\t\tevent.type = ( type === this.widgetEventPrefix ?\r\n\t\t\ttype :\r\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\r\n\t\t// the original event may come from any element\r\n\t\t// so we need to reset the target on the new event\r\n\t\tevent.target = this.element[ 0 ];\r\n\r\n\t\t// copy original event properties over to the new event\r\n\t\torig = event.originalEvent;\r\n\t\tif ( orig ) {\r\n\t\t\tfor ( prop in orig ) {\r\n\t\t\t\tif ( !( prop in event ) ) {\r\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element.trigger( event, data );\r\n\t\treturn !( $.isFunction( callback ) &&\r\n\t\t\tcallback.apply( this.element[0], [ event ].concat( data ) ) === false ||\r\n\t\t\tevent.isDefaultPrevented() );\r\n\t}\r\n};\r\n\r\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\r\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\r\n\t\tif ( typeof options === \"string\" ) {\r\n\t\t\toptions = { effect: options };\r\n\t\t}\r\n\t\tvar hasOptions,\r\n\t\t\teffectName = !options ?\r\n\t\t\t\tmethod :\r\n\t\t\t\toptions === true || typeof options === \"number\" ?\r\n\t\t\t\t\tdefaultEffect :\r\n\t\t\t\t\toptions.effect || defaultEffect;\r\n\t\toptions = options || {};\r\n\t\tif ( typeof options === \"number\" ) {\r\n\t\t\toptions = { duration: options };\r\n\t\t}\r\n\t\thasOptions = !$.isEmptyObject( options );\r\n\t\toptions.complete = callback;\r\n\t\tif ( options.delay ) {\r\n\t\t\telement.delay( options.delay );\r\n\t\t}\r\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\r\n\t\t\telement[ method ]( options );\r\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\r\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\r\n\t\t} else {\r\n\t\t\telement.queue(function( next ) {\r\n\t\t\t\t$( this )[ method ]();\r\n\t\t\t\tif ( callback ) {\r\n\t\t\t\t\tcallback.call( element[ 0 ] );\r\n\t\t\t\t}\r\n\t\t\t\tnext();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n\r\nvar widget = $.widget;\r\n\r\n\r\n\r\n}));\r\n\n/*\r\n * jQuery File Upload Plugin\r\n * https://github.com/blueimp/jQuery-File-Upload\r\n *\r\n * Copyright 2010, Sebastian Tschan\r\n * https://blueimp.net\r\n *\r\n * Licensed under the MIT license:\r\n * http://www.opensource.org/licenses/MIT\r\n */\r\n\r\n/* jshint nomen:false */\r\n/* global define, require, window, document, location, Blob, FormData */\r\n\r\n(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        // Register as an anonymous AMD module:\r\n        define([\r\n            'jquery',\r\n            'jquery.ui.widget'\r\n        ], factory);\r\n    } else if (typeof exports === 'object') {\r\n        // Node/CommonJS:\r\n        factory(\r\n            require('jquery'),\r\n            require('./vendor/jquery.ui.widget')\r\n        );\r\n    } else {\r\n        // Browser globals:\r\n        factory(window.jQuery);\r\n    }\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    // Detect file input support, based on\r\n    // http://viljamis.com/blog/2012/file-upload-support-on-mobile/\r\n    $.support.fileInput = !(new RegExp(\r\n        // Handle devices which give false positives for the feature detection:\r\n        '(Android (1\\\\.[0156]|2\\\\.[01]))' +\r\n            '|(Windows Phone (OS 7|8\\\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)' +\r\n            '|(w(eb)?OSBrowser)|(webOS)' +\r\n            '|(Kindle/(1\\\\.0|2\\\\.[05]|3\\\\.0))'\r\n    ).test(window.navigator.userAgent) ||\r\n        // Feature detection for all other devices:\r\n        $('<input type=\"file\">').prop('disabled'));\r\n\r\n    // The FileReader API is not actually used, but works as feature detection,\r\n    // as some Safari versions (5?) support XHR file uploads via the FormData API,\r\n    // but not non-multipart XHR file uploads.\r\n    // window.XMLHttpRequestUpload is not available on IE10, so we check for\r\n    // window.ProgressEvent instead to detect XHR2 file upload capability:\r\n    $.support.xhrFileUpload = !!(window.ProgressEvent && window.FileReader);\r\n    $.support.xhrFormDataFileUpload = !!window.FormData;\r\n\r\n    // Detect support for Blob slicing (required for chunked uploads):\r\n    $.support.blobSlice = window.Blob && (Blob.prototype.slice ||\r\n        Blob.prototype.webkitSlice || Blob.prototype.mozSlice);\r\n\r\n    // Helper function to create drag handlers for dragover/dragenter/dragleave:\r\n    function getDragHandler(type) {\r\n        var isDragOver = type === 'dragover';\r\n        return function (e) {\r\n            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;\r\n            var dataTransfer = e.dataTransfer;\r\n            if (dataTransfer && $.inArray('Files', dataTransfer.types) !== -1 &&\r\n                    this._trigger(\r\n                        type,\r\n                        $.Event(type, {delegatedEvent: e})\r\n                    ) !== false) {\r\n                e.preventDefault();\r\n                if (isDragOver) {\r\n                    dataTransfer.dropEffect = 'copy';\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    // The fileupload widget listens for change events on file input fields defined\r\n    // via fileInput setting and paste or drop events of the given dropZone.\r\n    // In addition to the default jQuery Widget methods, the fileupload widget\r\n    // exposes the \"add\" and \"send\" methods, to add or directly send files using\r\n    // the fileupload API.\r\n    // By default, files added via file input selection, paste, drag & drop or\r\n    // \"add\" method are uploaded immediately, but it is possible to override\r\n    // the \"add\" callback option to queue file uploads.\r\n    $.widget('blueimp.fileupload', {\r\n\r\n        options: {\r\n            // The drop target element(s), by the default the complete document.\r\n            // Set to null to disable drag & drop support:\r\n            dropZone: $(document),\r\n            // The paste target element(s), by the default undefined.\r\n            // Set to a DOM node or jQuery object to enable file pasting:\r\n            pasteZone: undefined,\r\n            // The file input field(s), that are listened to for change events.\r\n            // If undefined, it is set to the file input fields inside\r\n            // of the widget element on plugin initialization.\r\n            // Set to null to disable the change listener.\r\n            fileInput: undefined,\r\n            // By default, the file input field is replaced with a clone after\r\n            // each input field change event. This is required for iframe transport\r\n            // queues and allows change events to be fired for the same file\r\n            // selection, but can be disabled by setting the following option to false:\r\n            replaceFileInput: true,\r\n            // The parameter name for the file form data (the request argument name).\r\n            // If undefined or empty, the name property of the file input field is\r\n            // used, or \"files[]\" if the file input name property is also empty,\r\n            // can be a string or an array of strings:\r\n            paramName: undefined,\r\n            // By default, each file of a selection is uploaded using an individual\r\n            // request for XHR type uploads. Set to false to upload file\r\n            // selections in one request each:\r\n            singleFileUploads: true,\r\n            // To limit the number of files uploaded with one XHR request,\r\n            // set the following option to an integer greater than 0:\r\n            limitMultiFileUploads: undefined,\r\n            // The following option limits the number of files uploaded with one\r\n            // XHR request to keep the request size under or equal to the defined\r\n            // limit in bytes:\r\n            limitMultiFileUploadSize: undefined,\r\n            // Multipart file uploads add a number of bytes to each uploaded file,\r\n            // therefore the following option adds an overhead for each file used\r\n            // in the limitMultiFileUploadSize configuration:\r\n            limitMultiFileUploadSizeOverhead: 512,\r\n            // Set the following option to true to issue all file upload requests\r\n            // in a sequential order:\r\n            sequentialUploads: false,\r\n            // To limit the number of concurrent uploads,\r\n            // set the following option to an integer greater than 0:\r\n            limitConcurrentUploads: undefined,\r\n            // Set the following option to true to force iframe transport uploads:\r\n            forceIframeTransport: false,\r\n            // Set the following option to the location of a redirect url on the\r\n            // origin server, for cross-domain iframe transport uploads:\r\n            redirect: undefined,\r\n            // The parameter name for the redirect url, sent as part of the form\r\n            // data and set to 'redirect' if this option is empty:\r\n            redirectParamName: undefined,\r\n            // Set the following option to the location of a postMessage window,\r\n            // to enable postMessage transport uploads:\r\n            postMessage: undefined,\r\n            // By default, XHR file uploads are sent as multipart/form-data.\r\n            // The iframe transport is always using multipart/form-data.\r\n            // Set to false to enable non-multipart XHR uploads:\r\n            multipart: true,\r\n            // To upload large files in smaller chunks, set the following option\r\n            // to a preferred maximum chunk size. If set to 0, null or undefined,\r\n            // or the browser does not support the required Blob API, files will\r\n            // be uploaded as a whole.\r\n            maxChunkSize: undefined,\r\n            // When a non-multipart upload or a chunked multipart upload has been\r\n            // aborted, this option can be used to resume the upload by setting\r\n            // it to the size of the already uploaded bytes. This option is most\r\n            // useful when modifying the options object inside of the \"add\" or\r\n            // \"send\" callbacks, as the options are cloned for each file upload.\r\n            uploadedBytes: undefined,\r\n            // By default, failed (abort or error) file uploads are removed from the\r\n            // global progress calculation. Set the following option to false to\r\n            // prevent recalculating the global progress data:\r\n            recalculateProgress: true,\r\n            // Interval in milliseconds to calculate and trigger progress events:\r\n            progressInterval: 100,\r\n            // Interval in milliseconds to calculate progress bitrate:\r\n            bitrateInterval: 500,\r\n            // By default, uploads are started automatically when adding files:\r\n            autoUpload: true,\r\n\r\n            // Error and info messages:\r\n            messages: {\r\n                uploadedBytes: 'Uploaded bytes exceed file size'\r\n            },\r\n\r\n            // Translation function, gets the message key to be translated\r\n            // and an object with context specific data as arguments:\r\n            i18n: function (message, context) {\r\n                message = this.messages[message] || message.toString();\r\n                if (context) {\r\n                    $.each(context, function (key, value) {\r\n                        message = message.replace('{' + key + '}', value);\r\n                    });\r\n                }\r\n                return message;\r\n            },\r\n\r\n            // Additional form data to be sent along with the file uploads can be set\r\n            // using this option, which accepts an array of objects with name and\r\n            // value properties, a function returning such an array, a FormData\r\n            // object (for XHR file uploads), or a simple object.\r\n            // The form of the first fileInput is given as parameter to the function:\r\n            formData: function (form) {\r\n                return form.serializeArray();\r\n            },\r\n\r\n            // The add callback is invoked as soon as files are added to the fileupload\r\n            // widget (via file input selection, drag & drop, paste or add API call).\r\n            // If the singleFileUploads option is enabled, this callback will be\r\n            // called once for each file in the selection for XHR file uploads, else\r\n            // once for each file selection.\r\n            //\r\n            // The upload starts when the submit method is invoked on the data parameter.\r\n            // The data object contains a files property holding the added files\r\n            // and allows you to override plugin options as well as define ajax settings.\r\n            //\r\n            // Listeners for this callback can also be bound the following way:\r\n            // .bind('fileuploadadd', func);\r\n            //\r\n            // data.submit() returns a Promise object and allows to attach additional\r\n            // handlers using jQuery's Deferred callbacks:\r\n            // data.submit().done(func).fail(func).always(func);\r\n            add: function (e, data) {\r\n                if (e.isDefaultPrevented()) {\r\n                    return false;\r\n                }\r\n                if (data.autoUpload || (data.autoUpload !== false &&\r\n                        $(this).fileupload('option', 'autoUpload'))) {\r\n                    data.process().done(function () {\r\n                        data.submit();\r\n                    });\r\n                }\r\n            },\r\n\r\n            // Other callbacks:\r\n\r\n            // Callback for the submit event of each file upload:\r\n            // submit: function (e, data) {}, // .bind('fileuploadsubmit', func);\r\n\r\n            // Callback for the start of each file upload request:\r\n            // send: function (e, data) {}, // .bind('fileuploadsend', func);\r\n\r\n            // Callback for successful uploads:\r\n            // done: function (e, data) {}, // .bind('fileuploaddone', func);\r\n\r\n            // Callback for failed (abort or error) uploads:\r\n            // fail: function (e, data) {}, // .bind('fileuploadfail', func);\r\n\r\n            // Callback for completed (success, abort or error) requests:\r\n            // always: function (e, data) {}, // .bind('fileuploadalways', func);\r\n\r\n            // Callback for upload progress events:\r\n            // progress: function (e, data) {}, // .bind('fileuploadprogress', func);\r\n\r\n            // Callback for global upload progress events:\r\n            // progressall: function (e, data) {}, // .bind('fileuploadprogressall', func);\r\n\r\n            // Callback for uploads start, equivalent to the global ajaxStart event:\r\n            // start: function (e) {}, // .bind('fileuploadstart', func);\r\n\r\n            // Callback for uploads stop, equivalent to the global ajaxStop event:\r\n            // stop: function (e) {}, // .bind('fileuploadstop', func);\r\n\r\n            // Callback for change events of the fileInput(s):\r\n            // change: function (e, data) {}, // .bind('fileuploadchange', func);\r\n\r\n            // Callback for paste events to the pasteZone(s):\r\n            // paste: function (e, data) {}, // .bind('fileuploadpaste', func);\r\n\r\n            // Callback for drop events of the dropZone(s):\r\n            // drop: function (e, data) {}, // .bind('fileuploaddrop', func);\r\n\r\n            // Callback for dragover events of the dropZone(s):\r\n            // dragover: function (e) {}, // .bind('fileuploaddragover', func);\r\n\r\n            // Callback for the start of each chunk upload request:\r\n            // chunksend: function (e, data) {}, // .bind('fileuploadchunksend', func);\r\n\r\n            // Callback for successful chunk uploads:\r\n            // chunkdone: function (e, data) {}, // .bind('fileuploadchunkdone', func);\r\n\r\n            // Callback for failed (abort or error) chunk uploads:\r\n            // chunkfail: function (e, data) {}, // .bind('fileuploadchunkfail', func);\r\n\r\n            // Callback for completed (success, abort or error) chunk upload requests:\r\n            // chunkalways: function (e, data) {}, // .bind('fileuploadchunkalways', func);\r\n\r\n            // The plugin options are used as settings object for the ajax calls.\r\n            // The following are jQuery ajax settings required for the file uploads:\r\n            processData: false,\r\n            contentType: false,\r\n            cache: false,\r\n            timeout: 0\r\n        },\r\n\r\n        // A list of options that require reinitializing event listeners and/or\r\n        // special initialization code:\r\n        _specialOptions: [\r\n            'fileInput',\r\n            'dropZone',\r\n            'pasteZone',\r\n            'multipart',\r\n            'forceIframeTransport'\r\n        ],\r\n\r\n        _blobSlice: $.support.blobSlice && function () {\r\n            var slice = this.slice || this.webkitSlice || this.mozSlice;\r\n            return slice.apply(this, arguments);\r\n        },\r\n\r\n        _BitrateTimer: function () {\r\n            this.timestamp = ((Date.now) ? Date.now() : (new Date()).getTime());\r\n            this.loaded = 0;\r\n            this.bitrate = 0;\r\n            this.getBitrate = function (now, loaded, interval) {\r\n                var timeDiff = now - this.timestamp;\r\n                if (!this.bitrate || !interval || timeDiff > interval) {\r\n                    this.bitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\r\n                    this.loaded = loaded;\r\n                    this.timestamp = now;\r\n                }\r\n                return this.bitrate;\r\n            };\r\n        },\r\n\r\n        _isXHRUpload: function (options) {\r\n            return !options.forceIframeTransport &&\r\n                ((!options.multipart && $.support.xhrFileUpload) ||\r\n                $.support.xhrFormDataFileUpload);\r\n        },\r\n\r\n        _getFormData: function (options) {\r\n            var formData;\r\n            if ($.type(options.formData) === 'function') {\r\n                return options.formData(options.form);\r\n            }\r\n            if ($.isArray(options.formData)) {\r\n                return options.formData;\r\n            }\r\n            if ($.type(options.formData) === 'object') {\r\n                formData = [];\r\n                $.each(options.formData, function (name, value) {\r\n                    formData.push({name: name, value: value});\r\n                });\r\n                return formData;\r\n            }\r\n            return [];\r\n        },\r\n\r\n        _getTotal: function (files) {\r\n            var total = 0;\r\n            $.each(files, function (index, file) {\r\n                total += file.size || 1;\r\n            });\r\n            return total;\r\n        },\r\n\r\n        _initProgressObject: function (obj) {\r\n            var progress = {\r\n                loaded: 0,\r\n                total: 0,\r\n                bitrate: 0\r\n            };\r\n            if (obj._progress) {\r\n                $.extend(obj._progress, progress);\r\n            } else {\r\n                obj._progress = progress;\r\n            }\r\n        },\r\n\r\n        _initResponseObject: function (obj) {\r\n            var prop;\r\n            if (obj._response) {\r\n                for (prop in obj._response) {\r\n                    if (obj._response.hasOwnProperty(prop)) {\r\n                        delete obj._response[prop];\r\n                    }\r\n                }\r\n            } else {\r\n                obj._response = {};\r\n            }\r\n        },\r\n\r\n        _onProgress: function (e, data) {\r\n            if (e.lengthComputable) {\r\n                var now = ((Date.now) ? Date.now() : (new Date()).getTime()),\r\n                    loaded;\r\n                if (data._time && data.progressInterval &&\r\n                        (now - data._time < data.progressInterval) &&\r\n                        e.loaded !== e.total) {\r\n                    return;\r\n                }\r\n                data._time = now;\r\n                loaded = Math.floor(\r\n                    e.loaded / e.total * (data.chunkSize || data._progress.total)\r\n                ) + (data.uploadedBytes || 0);\r\n                // Add the difference from the previously loaded state\r\n                // to the global loaded counter:\r\n                this._progress.loaded += (loaded - data._progress.loaded);\r\n                this._progress.bitrate = this._bitrateTimer.getBitrate(\r\n                    now,\r\n                    this._progress.loaded,\r\n                    data.bitrateInterval\r\n                );\r\n                data._progress.loaded = data.loaded = loaded;\r\n                data._progress.bitrate = data.bitrate = data._bitrateTimer.getBitrate(\r\n                    now,\r\n                    loaded,\r\n                    data.bitrateInterval\r\n                );\r\n                // Trigger a custom progress event with a total data property set\r\n                // to the file size(s) of the current upload and a loaded data\r\n                // property calculated accordingly:\r\n                this._trigger(\r\n                    'progress',\r\n                    $.Event('progress', {delegatedEvent: e}),\r\n                    data\r\n                );\r\n                // Trigger a global progress event for all current file uploads,\r\n                // including ajax calls queued for sequential file uploads:\r\n                this._trigger(\r\n                    'progressall',\r\n                    $.Event('progressall', {delegatedEvent: e}),\r\n                    this._progress\r\n                );\r\n            }\r\n        },\r\n\r\n        _initProgressListener: function (options) {\r\n            var that = this,\r\n                xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();\r\n            // Accesss to the native XHR object is required to add event listeners\r\n            // for the upload progress event:\r\n            if (xhr.upload) {\r\n                $(xhr.upload).bind('progress', function (e) {\r\n                    var oe = e.originalEvent;\r\n                    // Make sure the progress event properties get copied over:\r\n                    e.lengthComputable = oe.lengthComputable;\r\n                    e.loaded = oe.loaded;\r\n                    e.total = oe.total;\r\n                    that._onProgress(e, options);\r\n                });\r\n                options.xhr = function () {\r\n                    return xhr;\r\n                };\r\n            }\r\n        },\r\n\r\n        _isInstanceOf: function (type, obj) {\r\n            // Cross-frame instanceof check\r\n            return Object.prototype.toString.call(obj) === '[object ' + type + ']';\r\n        },\r\n\r\n        _initXHRData: function (options) {\r\n            var that = this,\r\n                formData,\r\n                file = options.files[0],\r\n                // Ignore non-multipart setting if not supported:\r\n                multipart = options.multipart || !$.support.xhrFileUpload,\r\n                paramName = $.type(options.paramName) === 'array' ?\r\n                    options.paramName[0] : options.paramName;\r\n            options.headers = $.extend({}, options.headers);\r\n            if (options.contentRange) {\r\n                options.headers['Content-Range'] = options.contentRange;\r\n            }\r\n            if (!multipart || options.blob || !this._isInstanceOf('File', file)) {\r\n                options.headers['Content-Disposition'] = 'attachment; filename=\"' +\r\n                    encodeURI(file.name) + '\"';\r\n            }\r\n            if (!multipart) {\r\n                options.contentType = file.type || 'application/octet-stream';\r\n                options.data = options.blob || file;\r\n            } else if ($.support.xhrFormDataFileUpload) {\r\n                if (options.postMessage) {\r\n                    // window.postMessage does not allow sending FormData\r\n                    // objects, so we just add the File/Blob objects to\r\n                    // the formData array and let the postMessage window\r\n                    // create the FormData object out of this array:\r\n                    formData = this._getFormData(options);\r\n                    if (options.blob) {\r\n                        formData.push({\r\n                            name: paramName,\r\n                            value: options.blob\r\n                        });\r\n                    } else {\r\n                        $.each(options.files, function (index, file) {\r\n                            formData.push({\r\n                                name: ($.type(options.paramName) === 'array' &&\r\n                                    options.paramName[index]) || paramName,\r\n                                value: file\r\n                            });\r\n                        });\r\n                    }\r\n                } else {\r\n                    if (that._isInstanceOf('FormData', options.formData)) {\r\n                        formData = options.formData;\r\n                    } else {\r\n                        formData = new FormData();\r\n                        $.each(this._getFormData(options), function (index, field) {\r\n                            formData.append(field.name, field.value);\r\n                        });\r\n                    }\r\n                    if (options.blob) {\r\n                        formData.append(paramName, options.blob, file.name);\r\n                    } else {\r\n                        $.each(options.files, function (index, file) {\r\n                            // This check allows the tests to run with\r\n                            // dummy objects:\r\n                            if (that._isInstanceOf('File', file) ||\r\n                                    that._isInstanceOf('Blob', file)) {\r\n                                formData.append(\r\n                                    ($.type(options.paramName) === 'array' &&\r\n                                        options.paramName[index]) || paramName,\r\n                                    file,\r\n                                    file.uploadName || file.name\r\n                                );\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                options.data = formData;\r\n            }\r\n            // Blob reference is not needed anymore, free memory:\r\n            options.blob = null;\r\n        },\r\n\r\n        _initIframeSettings: function (options) {\r\n            var targetHost = $('<a></a>').prop('href', options.url).prop('host');\r\n            // Setting the dataType to iframe enables the iframe transport:\r\n            options.dataType = 'iframe ' + (options.dataType || '');\r\n            // The iframe transport accepts a serialized array as form data:\r\n            options.formData = this._getFormData(options);\r\n            // Add redirect url to form data on cross-domain uploads:\r\n            if (options.redirect && targetHost && targetHost !== location.host) {\r\n                options.formData.push({\r\n                    name: options.redirectParamName || 'redirect',\r\n                    value: options.redirect\r\n                });\r\n            }\r\n        },\r\n\r\n        _initDataSettings: function (options) {\r\n            if (this._isXHRUpload(options)) {\r\n                if (!this._chunkedUpload(options, true)) {\r\n                    if (!options.data) {\r\n                        this._initXHRData(options);\r\n                    }\r\n                    this._initProgressListener(options);\r\n                }\r\n                if (options.postMessage) {\r\n                    // Setting the dataType to postmessage enables the\r\n                    // postMessage transport:\r\n                    options.dataType = 'postmessage ' + (options.dataType || '');\r\n                }\r\n            } else {\r\n                this._initIframeSettings(options);\r\n            }\r\n        },\r\n\r\n        _getParamName: function (options) {\r\n            var fileInput = $(options.fileInput),\r\n                paramName = options.paramName;\r\n            if (!paramName) {\r\n                paramName = [];\r\n                fileInput.each(function () {\r\n                    var input = $(this),\r\n                        name = input.prop('name') || 'files[]',\r\n                        i = (input.prop('files') || [1]).length;\r\n                    while (i) {\r\n                        paramName.push(name);\r\n                        i -= 1;\r\n                    }\r\n                });\r\n                if (!paramName.length) {\r\n                    paramName = [fileInput.prop('name') || 'files[]'];\r\n                }\r\n            } else if (!$.isArray(paramName)) {\r\n                paramName = [paramName];\r\n            }\r\n            return paramName;\r\n        },\r\n\r\n        _initFormSettings: function (options) {\r\n            // Retrieve missing options from the input field and the\r\n            // associated form, if available:\r\n            if (!options.form || !options.form.length) {\r\n                options.form = $(options.fileInput.prop('form'));\r\n                // If the given file input doesn't have an associated form,\r\n                // use the default widget file input's form:\r\n                if (!options.form.length) {\r\n                    options.form = $(this.options.fileInput.prop('form'));\r\n                }\r\n            }\r\n            options.paramName = this._getParamName(options);\r\n            if (!options.url) {\r\n                options.url = options.form.prop('action') || location.href;\r\n            }\r\n            // The HTTP request method must be \"POST\" or \"PUT\":\r\n            options.type = (options.type ||\r\n                ($.type(options.form.prop('method')) === 'string' &&\r\n                    options.form.prop('method')) || ''\r\n                ).toUpperCase();\r\n            if (options.type !== 'POST' && options.type !== 'PUT' &&\r\n                    options.type !== 'PATCH') {\r\n                options.type = 'POST';\r\n            }\r\n            if (!options.formAcceptCharset) {\r\n                options.formAcceptCharset = options.form.attr('accept-charset');\r\n            }\r\n        },\r\n\r\n        _getAJAXSettings: function (data) {\r\n            var options = $.extend({}, this.options, data);\r\n            this._initFormSettings(options);\r\n            this._initDataSettings(options);\r\n            return options;\r\n        },\r\n\r\n        // jQuery 1.6 doesn't provide .state(),\r\n        // while jQuery 1.8+ removed .isRejected() and .isResolved():\r\n        _getDeferredState: function (deferred) {\r\n            if (deferred.state) {\r\n                return deferred.state();\r\n            }\r\n            if (deferred.isResolved()) {\r\n                return 'resolved';\r\n            }\r\n            if (deferred.isRejected()) {\r\n                return 'rejected';\r\n            }\r\n            return 'pending';\r\n        },\r\n\r\n        // Maps jqXHR callbacks to the equivalent\r\n        // methods of the given Promise object:\r\n        _enhancePromise: function (promise) {\r\n            promise.success = promise.done;\r\n            promise.error = promise.fail;\r\n            promise.complete = promise.always;\r\n            return promise;\r\n        },\r\n\r\n        // Creates and returns a Promise object enhanced with\r\n        // the jqXHR methods abort, success, error and complete:\r\n        _getXHRPromise: function (resolveOrReject, context, args) {\r\n            var dfd = $.Deferred(),\r\n                promise = dfd.promise();\r\n            context = context || this.options.context || promise;\r\n            if (resolveOrReject === true) {\r\n                dfd.resolveWith(context, args);\r\n            } else if (resolveOrReject === false) {\r\n                dfd.rejectWith(context, args);\r\n            }\r\n            promise.abort = dfd.promise;\r\n            return this._enhancePromise(promise);\r\n        },\r\n\r\n        // Adds convenience methods to the data callback argument:\r\n        _addConvenienceMethods: function (e, data) {\r\n            var that = this,\r\n                getPromise = function (args) {\r\n                    return $.Deferred().resolveWith(that, args).promise();\r\n                };\r\n            data.process = function (resolveFunc, rejectFunc) {\r\n                if (resolveFunc || rejectFunc) {\r\n                    data._processQueue = this._processQueue =\r\n                        (this._processQueue || getPromise([this])).pipe(\r\n                            function () {\r\n                                if (data.errorThrown) {\r\n                                    return $.Deferred()\r\n                                        .rejectWith(that, [data]).promise();\r\n                                }\r\n                                return getPromise(arguments);\r\n                            }\r\n                        ).pipe(resolveFunc, rejectFunc);\r\n                }\r\n                return this._processQueue || getPromise([this]);\r\n            };\r\n            data.submit = function () {\r\n                if (this.state() !== 'pending') {\r\n                    data.jqXHR = this.jqXHR =\r\n                        (that._trigger(\r\n                            'submit',\r\n                            $.Event('submit', {delegatedEvent: e}),\r\n                            this\r\n                        ) !== false) && that._onSend(e, this);\r\n                }\r\n                return this.jqXHR || that._getXHRPromise();\r\n            };\r\n            data.abort = function () {\r\n                if (this.jqXHR) {\r\n                    return this.jqXHR.abort();\r\n                }\r\n                this.errorThrown = 'abort';\r\n                that._trigger('fail', null, this);\r\n                return that._getXHRPromise(false);\r\n            };\r\n            data.state = function () {\r\n                if (this.jqXHR) {\r\n                    return that._getDeferredState(this.jqXHR);\r\n                }\r\n                if (this._processQueue) {\r\n                    return that._getDeferredState(this._processQueue);\r\n                }\r\n            };\r\n            data.processing = function () {\r\n                return !this.jqXHR && this._processQueue && that\r\n                    ._getDeferredState(this._processQueue) === 'pending';\r\n            };\r\n            data.progress = function () {\r\n                return this._progress;\r\n            };\r\n            data.response = function () {\r\n                return this._response;\r\n            };\r\n        },\r\n\r\n        // Parses the Range header from the server response\r\n        // and returns the uploaded bytes:\r\n        _getUploadedBytes: function (jqXHR) {\r\n            var range = jqXHR.getResponseHeader('Range'),\r\n                parts = range && range.split('-'),\r\n                upperBytesPos = parts && parts.length > 1 &&\r\n                    parseInt(parts[1], 10);\r\n            return upperBytesPos && upperBytesPos + 1;\r\n        },\r\n\r\n        // Uploads a file in multiple, sequential requests\r\n        // by splitting the file up in multiple blob chunks.\r\n        // If the second parameter is true, only tests if the file\r\n        // should be uploaded in chunks, but does not invoke any\r\n        // upload requests:\r\n        _chunkedUpload: function (options, testOnly) {\r\n            options.uploadedBytes = options.uploadedBytes || 0;\r\n            var that = this,\r\n                file = options.files[0],\r\n                fs = file.size,\r\n                ub = options.uploadedBytes,\r\n                mcs = options.maxChunkSize || fs,\r\n                slice = this._blobSlice,\r\n                dfd = $.Deferred(),\r\n                promise = dfd.promise(),\r\n                jqXHR,\r\n                upload;\r\n            if (!(this._isXHRUpload(options) && slice && (ub || mcs < fs)) ||\r\n                    options.data) {\r\n                return false;\r\n            }\r\n            if (testOnly) {\r\n                return true;\r\n            }\r\n            if (ub >= fs) {\r\n                file.error = options.i18n('uploadedBytes');\r\n                return this._getXHRPromise(\r\n                    false,\r\n                    options.context,\r\n                    [null, 'error', file.error]\r\n                );\r\n            }\r\n            // The chunk upload method:\r\n            upload = function () {\r\n                // Clone the options object for each chunk upload:\r\n                var o = $.extend({}, options),\r\n                    currentLoaded = o._progress.loaded;\r\n                o.blob = slice.call(\r\n                    file,\r\n                    ub,\r\n                    ub + mcs,\r\n                    file.type\r\n                );\r\n                // Store the current chunk size, as the blob itself\r\n                // will be dereferenced after data processing:\r\n                o.chunkSize = o.blob.size;\r\n                // Expose the chunk bytes position range:\r\n                o.contentRange = 'bytes ' + ub + '-' +\r\n                    (ub + o.chunkSize - 1) + '/' + fs;\r\n                // Process the upload data (the blob and potential form data):\r\n                that._initXHRData(o);\r\n                // Add progress listeners for this chunk upload:\r\n                that._initProgressListener(o);\r\n                jqXHR = ((that._trigger('chunksend', null, o) !== false && $.ajax(o)) ||\r\n                        that._getXHRPromise(false, o.context))\r\n                    .done(function (result, textStatus, jqXHR) {\r\n                        ub = that._getUploadedBytes(jqXHR) ||\r\n                            (ub + o.chunkSize);\r\n                        // Create a progress event if no final progress event\r\n                        // with loaded equaling total has been triggered\r\n                        // for this chunk:\r\n                        if (currentLoaded + o.chunkSize - o._progress.loaded) {\r\n                            that._onProgress($.Event('progress', {\r\n                                lengthComputable: true,\r\n                                loaded: ub - o.uploadedBytes,\r\n                                total: ub - o.uploadedBytes\r\n                            }), o);\r\n                        }\r\n                        options.uploadedBytes = o.uploadedBytes = ub;\r\n                        o.result = result;\r\n                        o.textStatus = textStatus;\r\n                        o.jqXHR = jqXHR;\r\n                        that._trigger('chunkdone', null, o);\r\n                        that._trigger('chunkalways', null, o);\r\n                        if (ub < fs) {\r\n                            // File upload not yet complete,\r\n                            // continue with the next chunk:\r\n                            upload();\r\n                        } else {\r\n                            dfd.resolveWith(\r\n                                o.context,\r\n                                [result, textStatus, jqXHR]\r\n                            );\r\n                        }\r\n                    })\r\n                    .fail(function (jqXHR, textStatus, errorThrown) {\r\n                        o.jqXHR = jqXHR;\r\n                        o.textStatus = textStatus;\r\n                        o.errorThrown = errorThrown;\r\n                        that._trigger('chunkfail', null, o);\r\n                        that._trigger('chunkalways', null, o);\r\n                        dfd.rejectWith(\r\n                            o.context,\r\n                            [jqXHR, textStatus, errorThrown]\r\n                        );\r\n                    });\r\n            };\r\n            this._enhancePromise(promise);\r\n            promise.abort = function () {\r\n                return jqXHR.abort();\r\n            };\r\n            upload();\r\n            return promise;\r\n        },\r\n\r\n        _beforeSend: function (e, data) {\r\n            if (this._active === 0) {\r\n                // the start callback is triggered when an upload starts\r\n                // and no other uploads are currently running,\r\n                // equivalent to the global ajaxStart event:\r\n                this._trigger('start');\r\n                // Set timer for global bitrate progress calculation:\r\n                this._bitrateTimer = new this._BitrateTimer();\r\n                // Reset the global progress values:\r\n                this._progress.loaded = this._progress.total = 0;\r\n                this._progress.bitrate = 0;\r\n            }\r\n            // Make sure the container objects for the .response() and\r\n            // .progress() methods on the data object are available\r\n            // and reset to their initial state:\r\n            this._initResponseObject(data);\r\n            this._initProgressObject(data);\r\n            data._progress.loaded = data.loaded = data.uploadedBytes || 0;\r\n            data._progress.total = data.total = this._getTotal(data.files) || 1;\r\n            data._progress.bitrate = data.bitrate = 0;\r\n            this._active += 1;\r\n            // Initialize the global progress values:\r\n            this._progress.loaded += data.loaded;\r\n            this._progress.total += data.total;\r\n        },\r\n\r\n        _onDone: function (result, textStatus, jqXHR, options) {\r\n            var total = options._progress.total,\r\n                response = options._response;\r\n            if (options._progress.loaded < total) {\r\n                // Create a progress event if no final progress event\r\n                // with loaded equaling total has been triggered:\r\n                this._onProgress($.Event('progress', {\r\n                    lengthComputable: true,\r\n                    loaded: total,\r\n                    total: total\r\n                }), options);\r\n            }\r\n            response.result = options.result = result;\r\n            response.textStatus = options.textStatus = textStatus;\r\n            response.jqXHR = options.jqXHR = jqXHR;\r\n            this._trigger('done', null, options);\r\n        },\r\n\r\n        _onFail: function (jqXHR, textStatus, errorThrown, options) {\r\n            var response = options._response;\r\n            if (options.recalculateProgress) {\r\n                // Remove the failed (error or abort) file upload from\r\n                // the global progress calculation:\r\n                this._progress.loaded -= options._progress.loaded;\r\n                this._progress.total -= options._progress.total;\r\n            }\r\n            response.jqXHR = options.jqXHR = jqXHR;\r\n            response.textStatus = options.textStatus = textStatus;\r\n            response.errorThrown = options.errorThrown = errorThrown;\r\n            this._trigger('fail', null, options);\r\n        },\r\n\r\n        _onAlways: function (jqXHRorResult, textStatus, jqXHRorError, options) {\r\n            // jqXHRorResult, textStatus and jqXHRorError are added to the\r\n            // options object via done and fail callbacks\r\n            this._trigger('always', null, options);\r\n        },\r\n\r\n        _onSend: function (e, data) {\r\n            if (!data.submit) {\r\n                this._addConvenienceMethods(e, data);\r\n            }\r\n            var that = this,\r\n                jqXHR,\r\n                aborted,\r\n                slot,\r\n                pipe,\r\n                options = that._getAJAXSettings(data),\r\n                send = function () {\r\n                    that._sending += 1;\r\n                    // Set timer for bitrate progress calculation:\r\n                    options._bitrateTimer = new that._BitrateTimer();\r\n                    jqXHR = jqXHR || (\r\n                        ((aborted || that._trigger(\r\n                            'send',\r\n                            $.Event('send', {delegatedEvent: e}),\r\n                            options\r\n                        ) === false) &&\r\n                        that._getXHRPromise(false, options.context, aborted)) ||\r\n                        that._chunkedUpload(options) || $.ajax(options)\r\n                    ).done(function (result, textStatus, jqXHR) {\r\n                        that._onDone(result, textStatus, jqXHR, options);\r\n                    }).fail(function (jqXHR, textStatus, errorThrown) {\r\n                        that._onFail(jqXHR, textStatus, errorThrown, options);\r\n                    }).always(function (jqXHRorResult, textStatus, jqXHRorError) {\r\n                        that._onAlways(\r\n                            jqXHRorResult,\r\n                            textStatus,\r\n                            jqXHRorError,\r\n                            options\r\n                        );\r\n                        that._sending -= 1;\r\n                        that._active -= 1;\r\n                        if (options.limitConcurrentUploads &&\r\n                                options.limitConcurrentUploads > that._sending) {\r\n                            // Start the next queued upload,\r\n                            // that has not been aborted:\r\n                            var nextSlot = that._slots.shift();\r\n                            while (nextSlot) {\r\n                                if (that._getDeferredState(nextSlot) === 'pending') {\r\n                                    nextSlot.resolve();\r\n                                    break;\r\n                                }\r\n                                nextSlot = that._slots.shift();\r\n                            }\r\n                        }\r\n                        if (that._active === 0) {\r\n                            // The stop callback is triggered when all uploads have\r\n                            // been completed, equivalent to the global ajaxStop event:\r\n                            that._trigger('stop');\r\n                        }\r\n                    });\r\n                    return jqXHR;\r\n                };\r\n            this._beforeSend(e, options);\r\n            if (this.options.sequentialUploads ||\r\n                    (this.options.limitConcurrentUploads &&\r\n                    this.options.limitConcurrentUploads <= this._sending)) {\r\n                if (this.options.limitConcurrentUploads > 1) {\r\n                    slot = $.Deferred();\r\n                    this._slots.push(slot);\r\n                    pipe = slot.pipe(send);\r\n                } else {\r\n                    this._sequence = this._sequence.pipe(send, send);\r\n                    pipe = this._sequence;\r\n                }\r\n                // Return the piped Promise object, enhanced with an abort method,\r\n                // which is delegated to the jqXHR object of the current upload,\r\n                // and jqXHR callbacks mapped to the equivalent Promise methods:\r\n                pipe.abort = function () {\r\n                    aborted = [undefined, 'abort', 'abort'];\r\n                    if (!jqXHR) {\r\n                        if (slot) {\r\n                            slot.rejectWith(options.context, aborted);\r\n                        }\r\n                        return send();\r\n                    }\r\n                    return jqXHR.abort();\r\n                };\r\n                return this._enhancePromise(pipe);\r\n            }\r\n            return send();\r\n        },\r\n\r\n        _onAdd: function (e, data) {\r\n            var that = this,\r\n                result = true,\r\n                options = $.extend({}, this.options, data),\r\n                files = data.files,\r\n                filesLength = files.length,\r\n                limit = options.limitMultiFileUploads,\r\n                limitSize = options.limitMultiFileUploadSize,\r\n                overhead = options.limitMultiFileUploadSizeOverhead,\r\n                batchSize = 0,\r\n                paramName = this._getParamName(options),\r\n                paramNameSet,\r\n                paramNameSlice,\r\n                fileSet,\r\n                i,\r\n                j = 0;\r\n            if (!filesLength) {\r\n                return false;\r\n            }\r\n            if (limitSize && files[0].size === undefined) {\r\n                limitSize = undefined;\r\n            }\r\n            if (!(options.singleFileUploads || limit || limitSize) ||\r\n                    !this._isXHRUpload(options)) {\r\n                fileSet = [files];\r\n                paramNameSet = [paramName];\r\n            } else if (!(options.singleFileUploads || limitSize) && limit) {\r\n                fileSet = [];\r\n                paramNameSet = [];\r\n                for (i = 0; i < filesLength; i += limit) {\r\n                    fileSet.push(files.slice(i, i + limit));\r\n                    paramNameSlice = paramName.slice(i, i + limit);\r\n                    if (!paramNameSlice.length) {\r\n                        paramNameSlice = paramName;\r\n                    }\r\n                    paramNameSet.push(paramNameSlice);\r\n                }\r\n            } else if (!options.singleFileUploads && limitSize) {\r\n                fileSet = [];\r\n                paramNameSet = [];\r\n                for (i = 0; i < filesLength; i = i + 1) {\r\n                    batchSize += files[i].size + overhead;\r\n                    if (i + 1 === filesLength ||\r\n                            ((batchSize + files[i + 1].size + overhead) > limitSize) ||\r\n                            (limit && i + 1 - j >= limit)) {\r\n                        fileSet.push(files.slice(j, i + 1));\r\n                        paramNameSlice = paramName.slice(j, i + 1);\r\n                        if (!paramNameSlice.length) {\r\n                            paramNameSlice = paramName;\r\n                        }\r\n                        paramNameSet.push(paramNameSlice);\r\n                        j = i + 1;\r\n                        batchSize = 0;\r\n                    }\r\n                }\r\n            } else {\r\n                paramNameSet = paramName;\r\n            }\r\n            data.originalFiles = files;\r\n            $.each(fileSet || files, function (index, element) {\r\n                var newData = $.extend({}, data);\r\n                newData.files = fileSet ? element : [element];\r\n                newData.paramName = paramNameSet[index];\r\n                that._initResponseObject(newData);\r\n                that._initProgressObject(newData);\r\n                that._addConvenienceMethods(e, newData);\r\n                result = that._trigger(\r\n                    'add',\r\n                    $.Event('add', {delegatedEvent: e}),\r\n                    newData\r\n                );\r\n                return result;\r\n            });\r\n            return result;\r\n        },\r\n\r\n        _replaceFileInput: function (data) {\r\n            var input = data.fileInput,\r\n                inputClone = input.clone(true),\r\n                restoreFocus = input.is(document.activeElement);\r\n            // Add a reference for the new cloned file input to the data argument:\r\n            data.fileInputClone = inputClone;\r\n            $('<form></form>').append(inputClone)[0].reset();\r\n            // Detaching allows to insert the fileInput on another form\r\n            // without loosing the file input value:\r\n            input.after(inputClone).detach();\r\n            // If the fileInput had focus before it was detached,\r\n            // restore focus to the inputClone.\r\n            if (restoreFocus) {\r\n                inputClone.focus();\r\n            }\r\n            // Avoid memory leaks with the detached file input:\r\n            $.cleanData(input.unbind('remove'));\r\n            // Replace the original file input element in the fileInput\r\n            // elements set with the clone, which has been copied including\r\n            // event handlers:\r\n            this.options.fileInput = this.options.fileInput.map(function (i, el) {\r\n                if (el === input[0]) {\r\n                    return inputClone[0];\r\n                }\r\n                return el;\r\n            });\r\n            // If the widget has been initialized on the file input itself,\r\n            // override this.element with the file input clone:\r\n            if (input[0] === this.element[0]) {\r\n                this.element = inputClone;\r\n            }\r\n        },\r\n\r\n        _handleFileTreeEntry: function (entry, path) {\r\n            var that = this,\r\n                dfd = $.Deferred(),\r\n                errorHandler = function (e) {\r\n                    if (e && !e.entry) {\r\n                        e.entry = entry;\r\n                    }\r\n                    // Since $.when returns immediately if one\r\n                    // Deferred is rejected, we use resolve instead.\r\n                    // This allows valid files and invalid items\r\n                    // to be returned together in one set:\r\n                    dfd.resolve([e]);\r\n                },\r\n                successHandler = function (entries) {\r\n                    that._handleFileTreeEntries(\r\n                        entries,\r\n                        path + entry.name + '/'\r\n                    ).done(function (files) {\r\n                        dfd.resolve(files);\r\n                    }).fail(errorHandler);\r\n                },\r\n                readEntries = function () {\r\n                    dirReader.readEntries(function (results) {\r\n                        if (!results.length) {\r\n                            successHandler(entries);\r\n                        } else {\r\n                            entries = entries.concat(results);\r\n                            readEntries();\r\n                        }\r\n                    }, errorHandler);\r\n                },\r\n                dirReader, entries = [];\r\n            path = path || '';\r\n            if (entry.isFile) {\r\n                if (entry._file) {\r\n                    // Workaround for Chrome bug #149735\r\n                    entry._file.relativePath = path;\r\n                    dfd.resolve(entry._file);\r\n                } else {\r\n                    entry.file(function (file) {\r\n                        file.relativePath = path;\r\n                        dfd.resolve(file);\r\n                    }, errorHandler);\r\n                }\r\n            } else if (entry.isDirectory) {\r\n                dirReader = entry.createReader();\r\n                readEntries();\r\n            } else {\r\n                // Return an empy list for file system items\r\n                // other than files or directories:\r\n                dfd.resolve([]);\r\n            }\r\n            return dfd.promise();\r\n        },\r\n\r\n        _handleFileTreeEntries: function (entries, path) {\r\n            var that = this;\r\n            return $.when.apply(\r\n                $,\r\n                $.map(entries, function (entry) {\r\n                    return that._handleFileTreeEntry(entry, path);\r\n                })\r\n            ).pipe(function () {\r\n                return Array.prototype.concat.apply(\r\n                    [],\r\n                    arguments\r\n                );\r\n            });\r\n        },\r\n\r\n        _getDroppedFiles: function (dataTransfer) {\r\n            dataTransfer = dataTransfer || {};\r\n            var items = dataTransfer.items;\r\n            if (items && items.length && (items[0].webkitGetAsEntry ||\r\n                    items[0].getAsEntry)) {\r\n                return this._handleFileTreeEntries(\r\n                    $.map(items, function (item) {\r\n                        var entry;\r\n                        if (item.webkitGetAsEntry) {\r\n                            entry = item.webkitGetAsEntry();\r\n                            if (entry) {\r\n                                // Workaround for Chrome bug #149735:\r\n                                entry._file = item.getAsFile();\r\n                            }\r\n                            return entry;\r\n                        }\r\n                        return item.getAsEntry();\r\n                    })\r\n                );\r\n            }\r\n            return $.Deferred().resolve(\r\n                $.makeArray(dataTransfer.files)\r\n            ).promise();\r\n        },\r\n\r\n        _getSingleFileInputFiles: function (fileInput) {\r\n            fileInput = $(fileInput);\r\n            var entries = fileInput.prop('webkitEntries') ||\r\n                    fileInput.prop('entries'),\r\n                files,\r\n                value;\r\n            if (entries && entries.length) {\r\n                return this._handleFileTreeEntries(entries);\r\n            }\r\n            files = $.makeArray(fileInput.prop('files'));\r\n            if (!files.length) {\r\n                value = fileInput.prop('value');\r\n                if (!value) {\r\n                    return $.Deferred().resolve([]).promise();\r\n                }\r\n                // If the files property is not available, the browser does not\r\n                // support the File API and we add a pseudo File object with\r\n                // the input value as name with path information removed:\r\n                files = [{name: value.replace(/^.*\\\\/, '')}];\r\n            } else if (files[0].name === undefined && files[0].fileName) {\r\n                // File normalization for Safari 4 and Firefox 3:\r\n                $.each(files, function (index, file) {\r\n                    file.name = file.fileName;\r\n                    file.size = file.fileSize;\r\n                });\r\n            }\r\n            return $.Deferred().resolve(files).promise();\r\n        },\r\n\r\n        _getFileInputFiles: function (fileInput) {\r\n            if (!(fileInput instanceof $) || fileInput.length === 1) {\r\n                return this._getSingleFileInputFiles(fileInput);\r\n            }\r\n            return $.when.apply(\r\n                $,\r\n                $.map(fileInput, this._getSingleFileInputFiles)\r\n            ).pipe(function () {\r\n                return Array.prototype.concat.apply(\r\n                    [],\r\n                    arguments\r\n                );\r\n            });\r\n        },\r\n\r\n        _onChange: function (e) {\r\n            var that = this,\r\n                data = {\r\n                    fileInput: $(e.target),\r\n                    form: $(e.target.form)\r\n                };\r\n            this._getFileInputFiles(data.fileInput).always(function (files) {\r\n                data.files = files;\r\n                if (that.options.replaceFileInput) {\r\n                    that._replaceFileInput(data);\r\n                }\r\n                if (that._trigger(\r\n                        'change',\r\n                        $.Event('change', {delegatedEvent: e}),\r\n                        data\r\n                    ) !== false) {\r\n                    that._onAdd(e, data);\r\n                }\r\n            });\r\n        },\r\n\r\n        _onPaste: function (e) {\r\n            var items = e.originalEvent && e.originalEvent.clipboardData &&\r\n                    e.originalEvent.clipboardData.items,\r\n                data = {files: []};\r\n            if (items && items.length) {\r\n                $.each(items, function (index, item) {\r\n                    var file = item.getAsFile && item.getAsFile();\r\n                    if (file) {\r\n                        data.files.push(file);\r\n                    }\r\n                });\r\n                if (this._trigger(\r\n                        'paste',\r\n                        $.Event('paste', {delegatedEvent: e}),\r\n                        data\r\n                    ) !== false) {\r\n                    this._onAdd(e, data);\r\n                }\r\n            }\r\n        },\r\n\r\n        _onDrop: function (e) {\r\n            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;\r\n            var that = this,\r\n                dataTransfer = e.dataTransfer,\r\n                data = {};\r\n            if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\r\n                e.preventDefault();\r\n                this._getDroppedFiles(dataTransfer).always(function (files) {\r\n                    data.files = files;\r\n                    if (that._trigger(\r\n                            'drop',\r\n                            $.Event('drop', {delegatedEvent: e}),\r\n                            data\r\n                        ) !== false) {\r\n                        that._onAdd(e, data);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        _onDragOver: getDragHandler('dragover'),\r\n\r\n        _onDragEnter: getDragHandler('dragenter'),\r\n\r\n        _onDragLeave: getDragHandler('dragleave'),\r\n\r\n        _initEventHandlers: function () {\r\n            if (this._isXHRUpload(this.options)) {\r\n                this._on(this.options.dropZone, {\r\n                    dragover: this._onDragOver,\r\n                    drop: this._onDrop,\r\n                    // event.preventDefault() on dragenter is required for IE10+:\r\n                    dragenter: this._onDragEnter,\r\n                    // dragleave is not required, but added for completeness:\r\n                    dragleave: this._onDragLeave\r\n                });\r\n                this._on(this.options.pasteZone, {\r\n                    paste: this._onPaste\r\n                });\r\n            }\r\n            if ($.support.fileInput) {\r\n                this._on(this.options.fileInput, {\r\n                    change: this._onChange\r\n                });\r\n            }\r\n        },\r\n\r\n        _destroyEventHandlers: function () {\r\n            this._off(this.options.dropZone, 'dragenter dragleave dragover drop');\r\n            this._off(this.options.pasteZone, 'paste');\r\n            this._off(this.options.fileInput, 'change');\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            var reinit = $.inArray(key, this._specialOptions) !== -1;\r\n            if (reinit) {\r\n                this._destroyEventHandlers();\r\n            }\r\n            this._super(key, value);\r\n            if (reinit) {\r\n                this._initSpecialOptions();\r\n                this._initEventHandlers();\r\n            }\r\n        },\r\n\r\n        _initSpecialOptions: function () {\r\n            var options = this.options;\r\n            if (options.fileInput === undefined) {\r\n                options.fileInput = this.element.is('input[type=\"file\"]') ?\r\n                        this.element : this.element.find('input[type=\"file\"]');\r\n            } else if (!(options.fileInput instanceof $)) {\r\n                options.fileInput = $(options.fileInput);\r\n            }\r\n            if (!(options.dropZone instanceof $)) {\r\n                options.dropZone = $(options.dropZone);\r\n            }\r\n            if (!(options.pasteZone instanceof $)) {\r\n                options.pasteZone = $(options.pasteZone);\r\n            }\r\n        },\r\n\r\n        _getRegExp: function (str) {\r\n            var parts = str.split('/'),\r\n                modifiers = parts.pop();\r\n            parts.shift();\r\n            return new RegExp(parts.join('/'), modifiers);\r\n        },\r\n\r\n        _isRegExpOption: function (key, value) {\r\n            return key !== 'url' && $.type(value) === 'string' &&\r\n                /^\\/.*\\/[igm]{0,3}$/.test(value);\r\n        },\r\n\r\n        _initDataAttributes: function () {\r\n            var that = this,\r\n                options = this.options,\r\n                data = this.element.data();\r\n            // Initialize options set via HTML5 data-attributes:\r\n            $.each(\r\n                this.element[0].attributes,\r\n                function (index, attr) {\r\n                    var key = attr.name.toLowerCase(),\r\n                        value;\r\n                    if (/^data-/.test(key)) {\r\n                        // Convert hyphen-ated key to camelCase:\r\n                        key = key.slice(5).replace(/-[a-z]/g, function (str) {\r\n                            return str.charAt(1).toUpperCase();\r\n                        });\r\n                        value = data[key];\r\n                        if (that._isRegExpOption(key, value)) {\r\n                            value = that._getRegExp(value);\r\n                        }\r\n                        options[key] = value;\r\n                    }\r\n                }\r\n            );\r\n        },\r\n\r\n        _create: function () {\r\n            this._initDataAttributes();\r\n            this._initSpecialOptions();\r\n            this._slots = [];\r\n            this._sequence = this._getXHRPromise(true);\r\n            this._sending = this._active = 0;\r\n            this._initProgressObject(this);\r\n            this._initEventHandlers();\r\n        },\r\n\r\n        // This method is exposed to the widget API and allows to query\r\n        // the number of active uploads:\r\n        active: function () {\r\n            return this._active;\r\n        },\r\n\r\n        // This method is exposed to the widget API and allows to query\r\n        // the widget upload progress.\r\n        // It returns an object with loaded, total and bitrate properties\r\n        // for the running uploads:\r\n        progress: function () {\r\n            return this._progress;\r\n        },\r\n\r\n        // This method is exposed to the widget API and allows adding files\r\n        // using the fileupload API. The data parameter accepts an object which\r\n        // must have a files property and can contain additional options:\r\n        // .fileupload('add', {files: filesList});\r\n        add: function (data) {\r\n            var that = this;\r\n            if (!data || this.options.disabled) {\r\n                return;\r\n            }\r\n            if (data.fileInput && !data.files) {\r\n                this._getFileInputFiles(data.fileInput).always(function (files) {\r\n                    data.files = files;\r\n                    that._onAdd(null, data);\r\n                });\r\n            } else {\r\n                data.files = $.makeArray(data.files);\r\n                this._onAdd(null, data);\r\n            }\r\n        },\r\n\r\n        // This method is exposed to the widget API and allows sending files\r\n        // using the fileupload API. The data parameter accepts an object which\r\n        // must have a files or fileInput property and can contain additional options:\r\n        // .fileupload('send', {files: filesList});\r\n        // The method returns a Promise object for the file upload call.\r\n        send: function (data) {\r\n            if (data && !this.options.disabled) {\r\n                if (data.fileInput && !data.files) {\r\n                    var that = this,\r\n                        dfd = $.Deferred(),\r\n                        promise = dfd.promise(),\r\n                        jqXHR,\r\n                        aborted;\r\n                    promise.abort = function () {\r\n                        aborted = true;\r\n                        if (jqXHR) {\r\n                            return jqXHR.abort();\r\n                        }\r\n                        dfd.reject(null, 'abort', 'abort');\r\n                        return promise;\r\n                    };\r\n                    this._getFileInputFiles(data.fileInput).always(\r\n                        function (files) {\r\n                            if (aborted) {\r\n                                return;\r\n                            }\r\n                            if (!files.length) {\r\n                                dfd.reject();\r\n                                return;\r\n                            }\r\n                            data.files = files;\r\n                            jqXHR = that._onSend(null, data);\r\n                            jqXHR.then(\r\n                                function (result, textStatus, jqXHR) {\r\n                                    dfd.resolve(result, textStatus, jqXHR);\r\n                                },\r\n                                function (jqXHR, textStatus, errorThrown) {\r\n                                    dfd.reject(jqXHR, textStatus, errorThrown);\r\n                                }\r\n                            );\r\n                        }\r\n                    );\r\n                    return this._enhancePromise(promise);\r\n                }\r\n                data.files = $.makeArray(data.files);\r\n                if (data.files.length) {\r\n                    return this._onSend(null, data);\r\n                }\r\n            }\r\n            return this._getXHRPromise(false, data && data.context);\r\n        }\r\n\r\n    });\r\n\r\n}));\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp')\r\n    .directive('acmeMalarkey', acmeMalarkey);\r\n\r\n  /** @ngInject */\r\n  function acmeMalarkey(malarkey) {\r\n    var directive = {\r\n      restrict: 'E',\r\n      scope: {\r\n        extraValues: '='\r\n      },\r\n      template: '&nbsp;',\r\n      link: linkFunc,\r\n      controller: MalarkeyController,\r\n      controllerAs: 'vm'\r\n    };\r\n\r\n    return directive;\r\n\r\n    function linkFunc(scope, el, attr, vm) {\r\n      var watcher;\r\n      var typist = malarkey(el[0], {\r\n        typeSpeed: 40,\r\n        deleteSpeed: 40,\r\n        pauseDelay: 800,\r\n        loop: true,\r\n        postfix: ' '\r\n      });\r\n\r\n      el.addClass('acme-malarkey');\r\n\r\n      angular.forEach(scope.extraValues, function(value) {\r\n        typist.type(value).pause().delete();\r\n      });\r\n\r\n      watcher = scope.$watch('vm.contributors', function() {\r\n        angular.forEach(vm.contributors, function(contributor) {\r\n          typist.type(contributor.login).pause().delete();\r\n        });\r\n      });\r\n\r\n      scope.$on('$destroy', function () {\r\n        watcher();\r\n      });\r\n    }\r\n\r\n    /** @ngInject */\r\n    function MalarkeyController($log, githubContributor) {\r\n      var vm = this;\r\n\r\n      vm.contributors = [];\r\n\r\n      activate();\r\n\r\n      function activate() {\r\n        return getContributors().then(function() {\r\n          $log.info('Activated Contributors View');\r\n        });\r\n      }\r\n\r\n      function getContributors() {\r\n        return githubContributor.getContributors(10).then(function(data) {\r\n          vm.contributors = data;\r\n\r\n          return vm.contributors;\r\n        });\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n/*\r\n * jQuery Iframe Transport Plugin\r\n * https://github.com/blueimp/jQuery-File-Upload\r\n *\r\n * Copyright 2011, Sebastian Tschan\r\n * https://blueimp.net\r\n *\r\n * Licensed under the MIT license:\r\n * http://www.opensource.org/licenses/MIT\r\n */\r\n\r\n/* global define, require, window, document */\r\n\r\n(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        // Register as an anonymous AMD module:\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        // Node/CommonJS:\r\n        factory(require('jquery'));\r\n    } else {\r\n        // Browser globals:\r\n        factory(window.jQuery);\r\n    }\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    // Helper variable to create unique names for the transport iframes:\r\n    var counter = 0;\r\n\r\n    // The iframe transport accepts four additional options:\r\n    // options.fileInput: a jQuery collection of file input fields\r\n    // options.paramName: the parameter name for the file form data,\r\n    //  overrides the name property of the file input field(s),\r\n    //  can be a string or an array of strings.\r\n    // options.formData: an array of objects with name and value properties,\r\n    //  equivalent to the return data of .serializeArray(), e.g.:\r\n    //  [{name: 'a', value: 1}, {name: 'b', value: 2}]\r\n    // options.initialIframeSrc: the URL of the initial iframe src,\r\n    //  by default set to \"javascript:false;\"\r\n    $.ajaxTransport('iframe', function (options) {\r\n        if (options.async) {\r\n            // javascript:false as initial iframe src\r\n            // prevents warning popups on HTTPS in IE6:\r\n            /*jshint scripturl: true */\r\n            var initialIframeSrc = options.initialIframeSrc || 'javascript:false;',\r\n            /*jshint scripturl: false */\r\n                form,\r\n                iframe,\r\n                addParamChar;\r\n            return {\r\n                send: function (_, completeCallback) {\r\n                    form = $('<form style=\"display:none;\"></form>');\r\n                    form.attr('accept-charset', options.formAcceptCharset);\r\n                    addParamChar = /\\?/.test(options.url) ? '&' : '?';\r\n                    // XDomainRequest only supports GET and POST:\r\n                    if (options.type === 'DELETE') {\r\n                        options.url = options.url + addParamChar + '_method=DELETE';\r\n                        options.type = 'POST';\r\n                    } else if (options.type === 'PUT') {\r\n                        options.url = options.url + addParamChar + '_method=PUT';\r\n                        options.type = 'POST';\r\n                    } else if (options.type === 'PATCH') {\r\n                        options.url = options.url + addParamChar + '_method=PATCH';\r\n                        options.type = 'POST';\r\n                    }\r\n                    // IE versions below IE8 cannot set the name property of\r\n                    // elements that have already been added to the DOM,\r\n                    // so we set the name along with the iframe HTML markup:\r\n                    counter += 1;\r\n                    iframe = $(\r\n                        '<iframe src=\"' + initialIframeSrc +\r\n                            '\" name=\"iframe-transport-' + counter + '\"></iframe>'\r\n                    ).bind('load', function () {\r\n                        var fileInputClones,\r\n                            paramNames = $.isArray(options.paramName) ?\r\n                                    options.paramName : [options.paramName];\r\n                        iframe\r\n                            .unbind('load')\r\n                            .bind('load', function () {\r\n                                var response;\r\n                                // Wrap in a try/catch block to catch exceptions thrown\r\n                                // when trying to access cross-domain iframe contents:\r\n                                try {\r\n                                    response = iframe.contents();\r\n                                    // Google Chrome and Firefox do not throw an\r\n                                    // exception when calling iframe.contents() on\r\n                                    // cross-domain requests, so we unify the response:\r\n                                    if (!response.length || !response[0].firstChild) {\r\n                                        throw new Error();\r\n                                    }\r\n                                } catch (e) {\r\n                                    response = undefined;\r\n                                }\r\n                                // The complete callback returns the\r\n                                // iframe content document as response object:\r\n                                completeCallback(\r\n                                    200,\r\n                                    'success',\r\n                                    {'iframe': response}\r\n                                );\r\n                                // Fix for IE endless progress bar activity bug\r\n                                // (happens on form submits to iframe targets):\r\n                                $('<iframe src=\"' + initialIframeSrc + '\"></iframe>')\r\n                                    .appendTo(form);\r\n                                window.setTimeout(function () {\r\n                                    // Removing the form in a setTimeout call\r\n                                    // allows Chrome's developer tools to display\r\n                                    // the response result\r\n                                    form.remove();\r\n                                }, 0);\r\n                            });\r\n                        form\r\n                            .prop('target', iframe.prop('name'))\r\n                            .prop('action', options.url)\r\n                            .prop('method', options.type);\r\n                        if (options.formData) {\r\n                            $.each(options.formData, function (index, field) {\r\n                                $('<input type=\"hidden\"/>')\r\n                                    .prop('name', field.name)\r\n                                    .val(field.value)\r\n                                    .appendTo(form);\r\n                            });\r\n                        }\r\n                        if (options.fileInput && options.fileInput.length &&\r\n                                options.type === 'POST') {\r\n                            fileInputClones = options.fileInput.clone();\r\n                            // Insert a clone for each file input field:\r\n                            options.fileInput.after(function (index) {\r\n                                return fileInputClones[index];\r\n                            });\r\n                            if (options.paramName) {\r\n                                options.fileInput.each(function (index) {\r\n                                    $(this).prop(\r\n                                        'name',\r\n                                        paramNames[index] || options.paramName\r\n                                    );\r\n                                });\r\n                            }\r\n                            // Appending the file input fields to the hidden form\r\n                            // removes them from their original location:\r\n                            form\r\n                                .append(options.fileInput)\r\n                                .prop('enctype', 'multipart/form-data')\r\n                                // enctype must be set as encoding for IE:\r\n                                .prop('encoding', 'multipart/form-data');\r\n                            // Remove the HTML5 form attribute from the input(s):\r\n                            options.fileInput.removeAttr('form');\r\n                        }\r\n                        form.submit();\r\n                        // Insert the file input fields at their original location\r\n                        // by replacing the clones with the originals:\r\n                        if (fileInputClones && fileInputClones.length) {\r\n                            options.fileInput.each(function (index, input) {\r\n                                var clone = $(fileInputClones[index]);\r\n                                // Restore the original name and form properties:\r\n                                $(input)\r\n                                    .prop('name', clone.prop('name'))\r\n                                    .attr('form', clone.attr('form'));\r\n                                clone.replaceWith(input);\r\n                            });\r\n                        }\r\n                    });\r\n                    form.append(iframe).appendTo(document.body);\r\n                },\r\n                abort: function () {\r\n                    if (iframe) {\r\n                        // javascript:false as iframe src aborts the request\r\n                        // and prevents warning popups on HTTPS in IE6.\r\n                        // concat is used to avoid the \"Script URL\" JSLint error:\r\n                        iframe\r\n                            .unbind('load')\r\n                            .prop('src', initialIframeSrc);\r\n                    }\r\n                    if (form) {\r\n                        form.remove();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    });\r\n\r\n    // The iframe transport returns the iframe content document as response.\r\n    // The following adds converters from iframe to text, json, html, xml\r\n    // and script.\r\n    // Please note that the Content-Type for JSON responses has to be text/plain\r\n    // or text/html, if the browser doesn't include application/json in the\r\n    // Accept header, else IE will show a download dialog.\r\n    // The Content-Type for XML responses on the other hand has to be always\r\n    // application/xml or text/xml, so IE properly parses the XML response.\r\n    // See also\r\n    // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#content-type-negotiation\r\n    $.ajaxSetup({\r\n        converters: {\r\n            'iframe text': function (iframe) {\r\n                return iframe && $(iframe[0].body).text();\r\n            },\r\n            'iframe json': function (iframe) {\r\n                return iframe && $.parseJSON($(iframe[0].body).text());\r\n            },\r\n            'iframe html': function (iframe) {\r\n                return iframe && $(iframe[0].body).html();\r\n            },\r\n            'iframe xml': function (iframe) {\r\n                var xmlDoc = iframe && iframe[0];\r\n                return xmlDoc && $.isXMLDoc(xmlDoc) ? xmlDoc :\r\n                        $.parseXML((xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) ||\r\n                            $(xmlDoc.body).html());\r\n            },\r\n            'iframe script': function (iframe) {\r\n                return iframe && $.globalEval($(iframe[0].body).text());\r\n            }\r\n        }\r\n    });\r\n\r\n}));\r\n\n(function() {\n  'use strict';\n\n  angular\n    .module('hisraWebapp')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          creationDate: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(moment, User, Authentication, $mdSidenav) {\n      var vm = this;\n\n      vm.getLogin = getLogin;\n      vm.toggleSidenav = toggleSidenav;\n\n      vm.getUsername = function () {\n          var user = Authentication.getCurrentUser();\n          if(user === undefined) {\n              return 'Anonymous';\n          }\n          return user.username;\n      };\n\n      // \"vm.creation\" is avaible by directive option \"bindToController: true\"\n      vm.relativeDate = moment(vm.creationDate).fromNow();\n      vm.title = 'HISRA Management';\n\n      function getLogin() {\n        var user = Authentication.getCurrentUser();\n        if(user === undefined) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n\n      function toggleSidenav() {\n        $mdSidenav('left')\n          .toggle()\n          .then(function(){\n            //$log.debug('toggled');\n          });\n      }\n    }\n  }\n\n})();\n\n(function() {\r\n  'use strict'\r\n  angular\r\n    .module('hisraWebapp')\r\n    .directive('sideNav', sideNav);\r\n\r\n    // @ngInject\r\n    function sideNav() {\r\n      var directive = {\r\n      restrict: 'E',\r\n      templateUrl: 'app/components/sidenav/sidenav.html',\r\n      //   scope: {\r\n      //       creationDate: '='\r\n      //   },\r\n      controller: SideNavController,\r\n      controllerAs: 'sidenav',\r\n      bindToController: true\r\n    };\r\n\r\n    return directive;\r\n\r\n      // @ngInject\r\n    function SideNavController(Authentication, User, webDevTec, $mdSidenav) {\r\n      var sidenav = this;\r\n      sidenav.title = 'Hisra Management';\r\n      sidenav.modules = [];\r\n      sidenav.getLogin = getLogin;\r\n      sidenav.getModules = getWebDevTec;\r\n      sidenav.close = closeNav;\r\n      \r\n      activate();\r\n      \r\n      function activate() {\r\n        getWebDevTec();\r\n      }\r\n      \r\n      function getLogin() {\r\n        var user = Authentication.getCurrentUser();\r\n        if(user == undefined) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n      \r\n      function getWebDevTec() {\r\n        sidenav.modules = webDevTec.getTec();\r\n      }\r\n      \r\n      function closeNav() {\r\n        $mdSidenav('left')\r\n          .close()\r\n          .then(function(){\r\n            $log.debug('closed');\r\n          });\r\n      }\r\n    }\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n      .module('hisraWebapp')\r\n      .service('webDevTec', webDevTec);\r\n\r\n  /** @ngInject */\r\n  function webDevTec() {\r\n    var data = [\r\n      {\r\n        'title': 'Devices',\r\n        'url': '/#/devices',\r\n        'description': 'Manage devices',\r\n        'icon': 'devices'\r\n      },\r\n      {\r\n        'title': 'Playlists',\r\n        'url': '/#/playlists',\r\n        'description': 'Manage playlists',\r\n        'icon': 'list'\r\n      },\r\n      {\r\n        'title': 'Media',\r\n        'url': '/#/media',\r\n        'description': 'Manage media',\r\n        'icon': 'video_library'\r\n      },\r\n      {\r\n        'title': 'Statistics',\r\n        'url': '/#/stats',\r\n        'description': 'Examine system statistics',\r\n        'icon': 'assessment'\r\n      }\r\n\r\n    ];\r\n\r\n    this.getTec = getTec;\r\n\r\n    function getTec() {\r\n      return data;\r\n    }\r\n  }\r\n\r\n})();\r\n\n(function(){\n'use strict';\n\nangular.module('hisraWebapp')\n.constant('BASE_URL', 'http://192.168.1.60:8000')\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp')\r\n    .config(config);\r\n\r\n  /** @ngInject */\r\n  function config($logProvider, $mdThemingProvider, toastrConfig) {\r\n    // Enable log\r\n    $logProvider.debugEnabled(true);\r\n\r\n    $mdThemingProvider.theme('default')\r\n      .primaryPalette('blue')\r\n      .accentPalette('pink');\r\n      \r\n    $mdThemingProvider.theme('altTheme')\r\n      .backgroundPalette('blue-grey').dark();\r\n      \r\n    // Set options third-party lib\r\n    toastrConfig.allowHtml = true;\r\n    toastrConfig.timeOut = 3000;\r\n    toastrConfig.positionClass = 'toast-top-right';\r\n    toastrConfig.preventDuplicates = true;\r\n    toastrConfig.progressBar = true;\r\n\r\n  }\r\n\r\n})();\r\n\n/* global malarkey:false, moment:false */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp')\r\n    .constant('malarkey', malarkey)\r\n    .constant('moment', moment);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp')\r\n    .config(routeConfig);\r\n\r\n  function routeConfig($routeProvider) {\r\n    $routeProvider\r\n      .when('/', {\r\n        templateUrl: 'app/main/main.html',\r\n        controller: 'MainController',\r\n        controllerAs: 'main'\r\n      })\r\n      .otherwise({\r\n        redirectTo: '/'\r\n      });\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp')\r\n    .run(runBlock);\r\n\r\n  /** @ngInject */\r\n  function runBlock($log) {\r\n\r\n    $log.debug('runBlock end');\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n.controller('AccountController', AccountController);\r\n\r\n/* @ngInject */\r\nfunction AccountController($scope, User, Authentication, $location) {\r\n  var loggedAs = Authentication.getCurrentUser();\r\n  if(loggedAs === undefined) {\r\n        return $location.path('/login');\r\n  }\r\n\r\n  var vm = this;\r\n  var user = User.$get(\r\n    {username: loggedAs.username},\r\n    function() {\r\n      console.log(\"Success: got user\");\r\n      vm.user = user;\r\n    },\r\n    function() {\r\n      console.log(\"Failure: could not get user\");\r\n    }\r\n  )\r\n  .then(function(user) {\r\n    console.dir(user);\r\n      vm.user = user;\r\n  });\r\n\r\n\r\n  $scope.logout = function() {\r\n      Authentication.logout();\r\n      $location.path('/login');\r\n  };\r\n\r\n  $scope.updateUser = function(user) {\r\n  };\r\n}\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/account', {\r\n    templateUrl: 'app/account/account.html',\r\n    controller: 'AccountController',\r\n    controllerAs: 'vm'\r\n  });\r\n}\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n// var controllerID = 'DevicesController';\r\nangular.module('hisraWebapp')\r\n\r\n.controller('DevicesController', DevicesController);\r\n\r\n/* @ngInject */\r\nfunction DevicesController($scope, $location, Authentication, User, Device, MediaTypes, Notification) {\r\n  var vm = this;\r\n\r\n  vm.deviceMap = {};\r\n  vm.playlistMap = {};\r\n  vm.errorMessage = '';\r\n  vm.clearSelections = clearSelections;\r\n\r\n  var user = Authentication.getCurrentUser();\r\n  if(user === undefined) {\r\n      return $location.path('/login');\r\n  }\r\n\r\n  $scope.notifier = Notification.createNotifier();\r\n\r\n  User.getDevices({username: user.username}).$promise\r\n    .then(function (devices) {\r\n      devices.map(function(device) {\r\n        vm.deviceMap[device.id] = device;\r\n      });\r\n    });\r\n\r\n  User.getPlaylists({username: user.username}).$promise\r\n    .then(function(playlists) {\r\n      playlists.map(function(playlist) {\r\n          vm.playlistMap[playlist.id] = playlist;\r\n          vm.playlistMap[playlist.id].media_schedule_json = JSON.parse(vm.playlistMap[playlist.id].media_schedule_json);\r\n        });\r\n    });\r\n\r\n\r\n\r\n  $scope.mediaTypes = MediaTypes;\r\n  $scope.selectedDevice = null;\r\n  $scope.$watch('selectedDevice', function(newValue, oldValue) {\r\n    $scope.selectedDevice = newValue;\r\n    if(newValue != undefined) {\r\n      console.log(newValue);\r\n      $scope.selectedPlaylist = vm.playlistMap[newValue.playlist];\r\n    }\r\n  });\r\n\r\n  $scope.refreshConfirmed = function() {\r\n    if(!$scope.selectedDevice) {\r\n      return;\r\n    }\r\n    var device = Device.get(\r\n      {username: user.username, id: $scope.selectedDevice.id},\r\n      function() {\r\n        $scope.selectedDevice.playlist = device.playlist;\r\n        $scope.selectedDevice.confirmed_playlist = device.confirmed_playlist;\r\n        $scope.selectedDevice.confirmed_playlist_update_time = device.confirmed_playlist_update_time;\r\n        $scope.notifier.showSuccess('Refresh complete');\r\n      },\r\n      function() {\r\n        $scope.notifier.showFailure('Could not fetch device info');\r\n      }\r\n    );\r\n  };\r\n\r\n  $scope.isConfirmed = function(playlist) {\r\n    if (!playlist || !$scope.selectedDevice) {\r\n      return '';\r\n    }\r\n    return ($scope.selectedDevice.confirmed_playlist == playlist.id &&\r\n            $scope.selectedDevice.confirmed_playlist_update_time == playlist.updated);\r\n  };\r\n\r\n  $scope.setDevicePlaylist = function(device, playlist) {\r\n    if(device === undefined || playlist === undefined) {\r\n      vm.errorMessage = 'You must select a device and a playlist';\r\n      return;\r\n    }\r\n    vm.errorMessage = '';\r\n    var reqParams = {\r\n      username: user.username,\r\n      id: device.id\r\n    };\r\n    Device.get(\r\n      reqParams,\r\n      function(device) {\r\n        updateDevice(device, playlist.id, reqParams);\r\n      },\r\n      // Failure\r\n      function() {\r\n        console.log(\"Device playlist update failed\");\r\n        vm.errorMessage = 'Could not update device playlist';\r\n      }\r\n    );\r\n  };\r\n\r\n  function updateDevice(device, playlistId, reqParams) {\r\n    device.playlist = playlistId;\r\n    device.$update(\r\n      reqParams,\r\n      function() {\r\n        $scope.notifier.showSuccess(\"Device playlist set\");\r\n      },\r\n      function() {\r\n        $scope.notifier.showFailure(\"Could not set device playlist\");\r\n      }\r\n    );\r\n  }\r\n  \r\n  function clearSelections() {\r\n      $scope.selectedDevice = null;\r\n      $scope.selectedPlaylist = null;\r\n  }\r\n}\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/devices', {\r\n    templateUrl: 'app/devices/devices.html',\r\n    controller: 'DevicesController',\r\n    controllerAs: 'devices'\r\n  });\r\n}\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n// var controllerID = 'DevicesController';\r\nangular.module('hisraWebapp')\r\n\r\n.controller('LoginController', LoginController);\r\n\r\n/* @ngInject */\r\nfunction LoginController(Authentication, $location) {\r\n  \tvar vm = this;\r\n    \r\n    activate(); // Log the user out if she navigates to the login screen?\r\n    \r\n\tvm.login = function(user) {\r\n      Authentication.login(user.username, user.password)\r\n      \t.then(function() {\r\n          $location.path('/');\r\n      \t});\r\n  };\r\n  \r\n  function activate() {\r\n      Authentication.logout();\r\n  }\r\n}\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/login', {\r\n    templateUrl: 'app/login/login.html',\r\n    controller: 'LoginController',\r\n    controllerAs: 'login'\r\n  });\r\n}\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('hisraWebapp')\r\n    .controller('MainController', MainController);\r\n\r\n  /* @ngInject */\r\n  function MainController(Authentication, $location, $timeout, webDevTec, toastr) {\r\n    var user = Authentication.getCurrentUser();\r\n    console.dir(user);\r\n    if(user === undefined) {\r\n        return $location.path('/login');\r\n    }\r\n\r\n    var vm = this;\r\n\r\n    vm.modules = [];\r\n    vm.classAnimation = '';\r\n    vm.creationDate = 1447844996577;\r\n    vm.showToastr = showToastr;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      getWebDevTec();\r\n      $timeout(function() {\r\n        vm.classAnimation = 'rubberBand';\r\n      }, 4000);\r\n    }\r\n\r\n    function showToastr() {\r\n      toastr.info('Hello!');\r\n      vm.classAnimation = '';\r\n    }\r\n\r\n    function getWebDevTec() {\r\n      vm.modules = webDevTec.getTec();\r\n\r\n      // angular.forEach(vm.modules, function(mod) {\r\n      //   mod.rank = Math.random();\r\n      // });\r\n    }\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n  angular.module('hisraWebapp')\r\n\r\n  .controller('MediaController', MediaController);\r\n\r\n  /* @ngInject */\r\n  function MediaController($scope, Authentication, $cookieStore, $location, User, Media, BASE_URL, MediaTypes, Notification) {\r\n\r\n    var user = Authentication.getCurrentUser();\r\n    if(user === undefined) {\r\n      return $location.path('/');\r\n    }\r\n\r\n    var vm = this;\r\n    vm.BASE_URL = BASE_URL;\r\n    vm.loading = false;\r\n\r\n    $scope.notifier = Notification.createNotifier();\r\n\r\n    $scope.allMedia = [];\r\n    $scope.visibilities = {\r\n      I: true,\r\n      V: true,\r\n      W: true\r\n    };\r\n\r\n    $scope.visibleMedia = [];\r\n    $scope.getVisibleMedia = function() {\r\n      $scope.visibleMedia = $scope.allMedia.filter(function(media) {\r\n        return $scope.visibilities[media.media_type];\r\n      });\r\n      return $scope.visibleMedia;\r\n    };\r\n\r\n    User.getMedia({username: user.username}).$promise\r\n      .then(function (media) {\r\n        $scope.allMedia = media;\r\n      });\r\n\r\n    $scope.mediaTypes = MediaTypes;\r\n    $scope.removeMedia = function(media) {\r\n        \r\n      vm.loading = false;\r\n      Media.delete(\r\n        {username: user.username, id: media.id},\r\n        null,\r\n        function() {\r\n          $scope.notifier.showSuccess(\"Removed media from server\");\r\n          $scope.allMedia = $scope.allMedia.filter(function(m) {\r\n            return m.id != media.id;\r\n          });\r\n          $scope.getVisibleMedia(); // Update visible media\r\n        },\r\n        function() {\r\n          $scope.notifier.showFailure(\"Could not remove media from server\");\r\n        }\r\n      );\r\n    };\r\n\r\n    $scope.externalMedia = {};\r\n\r\n    $scope.addExternalMedia = function(externalMedia) {\r\n        \r\n      var addedMedia = Media.save(\r\n        {username: user.username},\r\n        externalMedia,\r\n        function() {\r\n          \r\n          $scope.notifier.showSuccess(\"Media added\");\r\n          $scope.allMedia.push(addedMedia);\r\n          $scope.getVisibleMedia().$promise\r\n            .then(function(vm) { vm.loading = true; }); // Updates visible media\r\n        },\r\n        function() {\r\n          notifer.showFailure(\"Could not add media\").$promise\r\n            .then(function(vm) { vm.loading = false; });;\r\n        }\r\n      );\r\n    };\r\n\r\n    vm.openFileBrowser = function () {\r\n      document.getElementById('media-add__file').click();\r\n    };\r\n\r\n    var md5 = \"\";\r\n    var form_data = [];\r\n    function calculate_md5(file, chunk_size) {\r\n      var slice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,\r\n          chunks = Math.ceil(file.size / chunk_size),\r\n          current_chunk = 0,\r\n          spark = new SparkMD5.ArrayBuffer();\r\n      function onload(e) {\r\n        spark.append(e.target.result);  // append chunk\r\n        current_chunk++;\r\n        if (current_chunk < chunks) {\r\n          read_next_chunk();\r\n        } else {\r\n          md5 = spark.end();\r\n        }\r\n      }\r\n      function read_next_chunk() {\r\n        var reader = new FileReader();\r\n        reader.onload = onload;\r\n        var start = current_chunk * chunk_size,\r\n            end = Math.min(start + chunk_size, file.size);\r\n        reader.readAsArrayBuffer(slice.call(file, start, end));\r\n      }\r\n      read_next_chunk();\r\n    }\r\n    $(\"#media-add__file\").fileupload({\r\n      url: BASE_URL + '/api/chunked_upload/',\r\n      dataType: \"json\",\r\n      autoUpload: true,\r\n      maxChunkSize: 100000, // Chunks of 100 kB\r\n      formData: form_data,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      beforeSend: function(xhr) {\r\n        xhr.setRequestHeader('Authorization', 'Token ' + user.token);\r\n      },\r\n      add: function(e, data) { // Called before starting upload\r\n        // If this is the second file you're uploading we need to remove the\r\n        // old upload_id and just keep the csrftoken (which is always first).\r\n        form_data.splice(1);\r\n        calculate_md5(data.files[0], 100000);  // Again, chunks of 100 kB\r\n        data.submit();\r\n      },\r\n      chunkdone: function (e, data) { // Called after uploading each chunk\r\n        if (form_data.length < 2) {\r\n          form_data.push(\r\n            {\"name\": \"upload_id\", \"value\": data.result.upload_id}\r\n          );\r\n        }\r\n      },\r\n      done: function (e, data) { // Called when the file has completely uploaded\r\n        $.ajax({\r\n          beforeSend: function(xhr){\r\n            xhr.setRequestHeader('Authorization', 'Token ' + user.token);\r\n          },\r\n          xhrFields: {\r\n            withCredentials: true\r\n          },\r\n          type: \"POST\",\r\n            url: BASE_URL + '/api/chunked_upload_complete/',\r\n          data: {\r\n            upload_id: data.result.upload_id,\r\n            md5: md5,\r\n          },\r\n          dataType: \"json\",\r\n          success: function(data) {\r\n            $scope.notifier.showSuccess(\"Created media\");\r\n          }\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/media', {\r\n    templateUrl: 'app/media/media.html',\r\n    controller: 'MediaController',\r\n    controllerAs: 'media'\r\n  });\r\n}\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n.controller('PlaylistDetailController', PlaylistDetailController);\r\n\r\n/* @ngInject */\r\nfunction PlaylistDetailController($scope, $location, $timeout, $routeParams, Authentication, User, Playlist, Media, MediaTypes, Notification) {\r\n  var user = Authentication.getCurrentUser();\r\n  if(user === undefined) {\r\n      return $location.path('/login');\r\n  }\r\n\r\n  $scope.allMedia = [];\r\n  User.getMedia({username: user.username}).$promise\r\n  .then(function (media) {\r\n    $scope.allMedia = media;\r\n    console.dir(media);\r\n  });\r\n\r\n  $scope.mediaTypes = MediaTypes;\r\n\r\n  $scope.addToPlaylist = function(media) {\r\n    media.time = 20;\r\n    $scope.playlist.media_schedule.push(media);\r\n  };\r\n\r\n  $scope.savePlaylist = function() {\r\n    var updatedPlaylist = angular.copy($scope.playlist);\r\n    updatedPlaylist.media_schedule_json = JSON.stringify(updatedPlaylist.media_schedule);\r\n    delete updatedPlaylist.media_schedule;\r\n    Playlist.update({\r\n        username: user.username,\r\n        id: updatedPlaylist.id\r\n      }, \r\n      updatedPlaylist,\r\n      function() {\r\n        $scope.notifier.showSuccess(\"Saved playlist\");\r\n      },\r\n      function() {\r\n        $scope.notifier.showFailure(\"Failed to save playlist\");\r\n      }\r\n    );\r\n  };\r\n\r\n  $scope.removeMedia = function(media) {\r\n    var index = $scope.playlist.media_schedule.indexOf(media);\r\n    if(index != -1) {\r\n      $scope.playlist.media_schedule.splice(index, 1);\r\n    }\r\n  };\r\n\r\n  Playlist.get({\r\n    id: $routeParams.playlistId,\r\n    username: user.username\r\n  }).$promise.then(function(playlist) {\r\n    var jsonSchedule = playlist.media_schedule_json;\r\n    playlist.media_schedule = JSON.parse(jsonSchedule);\r\n    $scope.playlist = playlist;\r\n  });\r\n\r\n  $scope.deletePlaylist = function() {\r\n    var answer = confirm(\"Are you sure you want to delete the playlist?\");\r\n    if(!answer) {\r\n      return;\r\n    }\r\n    Playlist.delete(\r\n      {username: user.username, id: $scope.playlist.id},\r\n      null,\r\n      function() {\r\n        $location.path('/playlists');\r\n      },\r\n      function() {\r\n        $scope.notifier.showFailure(\"FAILURE: Could not delete playlist\");\r\n      }\r\n    );\r\n  };\r\n\r\n  $scope.notifier = Notification.createNotifier();\r\n}\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/playlist/:playlistId', {\r\n    templateUrl: 'app/playlist-detail/playlist-detail.html',\r\n    controller: 'PlaylistDetailController',\r\n    controllerAs: 'playlist'\r\n  });\r\n}\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n// var controllerID = 'DevicesController';\r\nangular.module('hisraWebapp')\r\n\r\n.controller('PlaylistsController', PlaylistController);\r\n\r\n/* @ngInject */\r\nfunction PlaylistController($location, $scope, Authentication, User, Playlist) {\r\n  var vm = this;\r\n\r\n  var user = Authentication.getCurrentUser();\r\n  if(user === undefined) {\r\n      return $location.path('/login');\r\n  }\r\n  vm.playlists = [];\r\n\r\n  User.getPlaylists({username: user.username}).$promise\r\n    .then(function (playlists) {\r\n      vm.playlists = playlists.map(function(playlist) {\r\n        // JSON parsing doesn't seem to accept single parentheses\r\n        var jsonSchedule = playlist.media_schedule_json;\r\n        playlist.media_schedule = JSON.parse(jsonSchedule);\r\n        return playlist;\r\n      });\r\n    });\r\n\r\n  $scope.createNewPlaylist = function() {\r\n    var newPl = Playlist.save(\r\n      {username: user.username},\r\n      {\r\n        name: 'New playlist',\r\n        description: '',\r\n        media_schedule_json: '[]'\r\n      },\r\n      function() {\r\n        $location.path('/playlist/' + newPl.id);\r\n      },\r\n      function() {\r\n        console.log(\"Failed to create new playlist\");\r\n      }\r\n    );\r\n  };\r\n\r\n  $scope.editPlaylist = function(playlist) {\r\n    $location.path('/playlist/' + playlist.id);\r\n  };\r\n}\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/playlists', {\r\n    templateUrl: 'app/playlists/playlists.html',\r\n    controller: 'PlaylistsController',\r\n    controllerAs: 'playlists'\r\n  });\r\n}\r\n\r\n})();\r\n\n// TODO move under components; IIFE and other refactoring\r\n(function() {\r\n'use strict';\r\n\r\n/* global angular */\r\n\r\nangular.module('hisraWebapp')\r\n\r\n.factory('Authentication', AuthenticationFactory);\r\n\r\n/*@ngInject*/\r\nfunction AuthenticationFactory($http, $window, BASE_URL) {\r\n\r\n  var userHolder = {\r\n      currentUser: undefined\r\n  };\r\n\r\n  var authentication = {};\r\n  authentication.login = Login;\r\n  authentication.logout = Logout;\r\n  authentication.getCurrentUser = GetCurrentUser;\r\n\r\n  function Login(username, password) {\r\n      return $http.post(BASE_URL + '/api/authentication', { username: username, password: password })\r\n        .then(function (response) {\r\n          var currentUser = {\r\n            username: username,\r\n            token: response.data.token\r\n          };\r\n\r\n          if($window.sessionStorage) {\r\n            $window.sessionStorage.setItem('currentUser', JSON.stringify(currentUser));\r\n          }\r\n\r\n          userHolder.currentUser = currentUser;\r\n\r\n          $http.defaults.headers.common.Authorization = 'Token ' + currentUser.token;\r\n        });\r\n  }\r\n\r\n  function Logout() {\r\n    userHolder.currentUser = undefined;\r\n    if($window.sessionStorage) {\r\n      $window.sessionStorage.setItem('currentUser', undefined);\r\n    }\r\n    delete $http.defaults.headers.common.Authorization;\r\n  }\r\n\r\n  function GetCurrentUser() {\r\n      if(userHolder.currentUser !== undefined) {\r\n          return userHolder.currentUser;\r\n      }\r\n\r\n      if($window.sessionStorage) {\r\n        var sessionUser = $window.sessionStorage.getItem('currentUser');\r\n        if(sessionUser && sessionUser != \"undefined\") {\r\n          sessionUser = JSON.parse(sessionUser);\r\n          $http.defaults.headers.common.Authorization = 'Token ' + sessionUser.token;\r\n          userHolder.currentUser = sessionUser;\r\n          return sessionUser;\r\n        }\r\n      }\r\n\r\n      return undefined;\r\n  }\r\n\r\n  return authentication;\r\n}\r\n})();\r\n\n// TODO move under components; IIFE and other refactoring\r\n(function() {\r\n'use strict';\r\n\r\n/* global angular */\r\n\r\nangular.module('hisraWebapp')\r\n\r\n.factory('Device', DeviceFactory)\r\n.factory('Statistics', StatisticsFactory);\r\n\r\n/*@ngInject*/\r\nfunction DeviceFactory($resource, BASE_URL) {\r\n  return $resource(BASE_URL + '/api/user/:username/device/:id', {\r\n    id: '@id'\r\n  }, {\r\n    update: {\r\n      method: 'PUT'\r\n    }\r\n  });\r\n}\r\n\r\n/*@ngInject*/\r\nfunction StatisticsFactory($resource, BASE_URL) {\r\n  return $resource(BASE_URL + '/api/user/:username/device/:id/statistics', {\r\n    id: '@id'\r\n  });\r\n}\r\n\r\n})();\r\n\n(function(){\r\n'use strict';\r\n\r\n/* global angular */\r\n\r\nangular.module('hisraWebapp')\r\n\r\n.factory('Media', MediaFactory)\r\n.factory('MediaTypes', MediaTypesFactory);\r\n\r\n/*@ngInject*/\r\nfunction MediaFactory($resource, BASE_URL) {\r\n  return $resource(BASE_URL + '/api/user/:username/media/:id', {\r\n    id: '@id'\r\n  });\r\n}\r\n\r\nfunction MediaTypesFactory() {\r\n  return {\r\n    types: [\r\n      {\r\n        label: 'Web page',\r\n        fieldName: 'W'\r\n      }, {\r\n        label: 'Video',\r\n        fieldName: 'V',\r\n      }, {\r\n        label: 'Image',\r\n        fieldName: 'I'\r\n      }\r\n    ],\r\n    labelFor: function(fieldName) {\r\n      for(var i=0; i<this.types.length; ++i) {\r\n        if(this.types[i].fieldName == fieldName) {\r\n          return this.types[i].label;\r\n        }\r\n      }\r\n    },\r\n    fieldNameFor: function(label) {\r\n      for(var i=0; i<this.types.length; ++i) {\r\n        if(this.types[i].label == label) {\r\n          return this.types[i].fieldName;\r\n        }\r\n      }\r\n    }\r\n  };\r\n}\r\n})();\r\n\n(function(){\r\n'use strict';\r\n\r\n/* global angular */\r\n\r\nangular.module('hisraWebapp')\r\n\r\n.factory('Notification', NotificationFactory);\r\n\r\n/*@ngInject*/\r\nfunction NotificationFactory($timeout, BASE_URL) {\r\n\r\n  return {\r\n    createNotifier: function() {\r\n      return {\r\n        fadeTime: 6000,\r\n        visibility: {\r\n          failure: false,\r\n          success: false\r\n        },\r\n        message: {\r\n          failure: 'Default success',\r\n          success: 'Default fail'\r\n        },\r\n        showMessage: function(type, message) {\r\n          this.visibility[type] = true;\r\n          this.message[type] = message;\r\n          var struct = this;\r\n          $timeout(function() {\r\n            struct.hideMessage(type);\r\n            console.log(\"Timeout called\");\r\n          }, struct.fadeTime);\r\n        },\r\n        hideMessage: function(type) {\r\n          this.visibility[type] = false;\r\n        },\r\n        showSuccess: function(message) {\r\n          this.showMessage('success', message);\r\n        },\r\n        showFailure: function(message) {\r\n          this.showMessage('failure', message);\r\n        },\r\n        isVisible: function(type) {\r\n            return this.visibility[type];\r\n        },\r\n        isSuccessVisible: function() {\r\n          return this.isVisible('success');\r\n        },\r\n        isFailureVisible: function() {\r\n          return this.isVisible('failure');\r\n        },\r\n        hideSuccess: function() {\r\n          this.hideMessage('success');\r\n        },\r\n        hideFailure: function() {\r\n          this.hideMessage('failure');\r\n        },\r\n        getMessage: function(type) {\r\n          return this.message[type];\r\n        },\r\n        getSuccessMessage: function() {\r\n          return this.getMessage('success');\r\n        },\r\n        getFailureMessage: function() {\r\n          return this.getMessage('failure');\r\n        }\r\n      };\r\n    }\r\n  };\r\n\r\n}\r\n})();\r\n\n(function(){\r\n'use strict';\r\n\r\n/* global angular */\r\n\r\nangular.module('hisraWebapp')\r\n\r\n.factory('Playlist', PlaylistFactory);\r\n\r\n/*@ngInject*/\r\nfunction PlaylistFactory($resource, BASE_URL) {\r\n  return $resource(BASE_URL + '/api/user/:username/playlist/:id', {\r\n    id: '@id'\r\n  }, {\r\n    update: {\r\n      method: 'PUT'\r\n    }\r\n  });\r\n}\r\n})();\r\n\n(function(){\r\n  'use strict';\r\n  /* global angular */\r\n\r\n  angular.module('hisraWebapp')\r\n  .factory('User', UserFactory);\r\n\r\n  /*@ngInject*/\r\n  function UserFactory($resource, Media, Playlist, Device, BASE_URL) {\r\n    var resource = $resource(BASE_URL + '/api/user/:username', {\r\n      username: '@username'\r\n    });\r\n\r\n    return angular.extend(resource.prototype, {\r\n      getMedia: function(config) {\r\n        config = config || {};\r\n        config.username = config.username || this.username;\r\n        return Media.query(config);\r\n      },\r\n      getPlaylists: function(config) {\r\n        config = config || {};\r\n        config.username = config.username || this.username;\r\n        return Playlist.query(config);\r\n      },\r\n      getDevices: function(config) {\r\n        config = config || {};\r\n        config.username = config.username || this.username;\r\n        return Device.query(config);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .controller('StatsController', StatsController);\r\n\r\n/*@ngInject*/\r\nfunction StatsController(Authentication, $location, User, Device, Statistics, $scope) {\r\n  var user = Authentication.getCurrentUser();\r\n  if(user === undefined) {\r\n    $location.path('/login');\r\n  }\r\n\r\n  User.getDevices({username: user.username}).$promise.then(function(devices) {\r\n    console.dir(devices);\r\n    $scope.devices = devices;\r\n  });\r\n\r\n  $scope.getSelectedStats = function() {\r\n    if(!$scope.selectedDevice) {\r\n      return [];\r\n    }\r\n    return getAndCacheStats($scope.selectedDevice);\r\n  };\r\n\r\n  var statMap = {};\r\n\r\n  function getAndCacheStats(device) {\r\n    var stats = statMap[device.id];\r\n    if(stats) {\r\n      return stats;\r\n    }\r\n    stats = Statistics.query(\r\n       {username: user.username, id: device.id},\r\n       function() {\r\n         console.log(\"SUCCESS fetching stats\");\r\n       },\r\n       function() {\r\n         console.log(\"FAILURE fetching stats\");\r\n       }\r\n    );\r\n    statMap[device.id] = stats;\r\n    return stats;\r\n  }\r\n\r\n  $scope.getStatTypeString = function(stat) {\r\n    if(stat.type === 0) {\r\n      return 'Error';\r\n    }\r\n    if(stat.type === 1) {\r\n      return 'Success';\r\n    }\r\n  };\r\n}\r\n\r\n})();\r\n\n(function() {\r\n'use strict';\r\nangular.module('hisraWebapp')\r\n  .config(routeConfig);\r\n\r\nfunction routeConfig ($routeProvider) {\r\n  $routeProvider.when('/stats', {\r\n    templateUrl: 'app/stats/stats.html',\r\n    controller: 'StatsController',\r\n    controllerAs: 'stats'\r\n  });\r\n}\r\n})();\r\n\n(function() {\r\n'use strict';\r\n\r\nangular.module('hisraWebapp')\r\n  .controller('ToastController', ToastController);\r\n\r\n/* @ngInject */\r\nfunction ToastController($mdToast) {\r\n    var vm = this;\r\n    \r\n    vm.closeToast = function() {\r\n    $mdToast.hide();\r\n  };\r\n}\r\n})();\nangular.module(\"hisraWebapp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/account/account.html\",\"<div layout-padding=\\\"\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><h2>{{vm.user.username}}</h2><form novalidate=\\\"\\\" class=\\\"simple-form\\\">First name: {{vm.user.first_name}}<br>Last name: {{vm.user.last_name}}<br>Email: {{vm.user.email}}<br></form><md-button class=\\\"md-primary md-raised\\\" ng-click=\\\"logout()\\\"><md-icon class=\\\"md-icons\\\">exit_to_app</md-icon>Logout</md-button></div>\");\n$templateCache.put(\"app/devices/devices.html\",\"<div layout-padding=\\\"\\\"><form name=\\\"devicesForm\\\"><h3>Your devices</h3><md-input-container class=\\\"md-block\\\"><md-select ng-model=\\\"selectedDevice\\\" name=\\\"selectedDevice\\\" placeholder=\\\"Device\\\"><md-option disabled=\\\"\\\">Device</md-option><md-option ng-repeat=\\\"device in devices.deviceMap\\\">{{device.name}}</md-option></md-select><div class=\\\"error\\\" ng-messages=\\\"devicesForm.deviceSelection.$error\\\"><div ng-message=\\\"noselection\\\">{{devices.errorMessage}}</div></div></md-input-container><md-input-container class=\\\"md-block\\\"><md-select ng-model=\\\"selectedPlaylist\\\" placeholder=\\\"Playlist\\\"><md-option disabled=\\\"\\\">Playlist</md-option><md-option ng-repeat=\\\"playlist in devices.playlistMap\\\">{{playlist.name}}</md-option></md-select></md-input-container><md-button class=\\\"md-raised\\\" ng-click=\\\"devices.clearSelections()\\\">Clear Selections</md-button><md-button class=\\\"md-primary md-raised\\\" ng-click=\\\"setDevicePlaylist(selectedDevice, selectedPlaylist)\\\">Set Device Playlist</md-button><div style=\\\"color: #F00\\\">{{devices.errorMessage}}</div></form><div><h3>Playlist details</h3><b>Name:</b> {{selectedPlaylist.name}}<br><b>Description:</b> {{selectedPlaylist.description}}<br><b>Confirmed in use by device:</b> {{isConfirmed(selectedPlaylist)}} <input type=\\\"submit\\\" value=\\\"Refresh\\\" ng-click=\\\"refreshConfirmed()\\\"><br><b>Schedule:</b><br><md-table-container><table md-table=\\\"\\\" class=\\\"table table-hover table-mc-light-blue\\\"><thead md-head=\\\"\\\"><tr md-row=\\\"\\\"><th md-column=\\\"\\\">Name</th><th md-column=\\\"\\\">Description</th><th md-column=\\\"\\\">URL</th><th md-column=\\\"\\\">Type</th><th md-column=\\\"\\\">Display time</th></tr></thead><tbody md-body=\\\"\\\"><tr md-row=\\\"\\\" ng-repeat=\\\"media in selectedPlaylist.media_schedule_json track by $index\\\"><td md-cell=\\\"\\\">{{media.name}}</td><td md-cell=\\\"\\\">{{media.description}}</td><td md-cell=\\\"\\\">{{ media.url }}</td><td md-cell=\\\"\\\">{{ mediaTypes.labelFor(media.media_type) }}</td><td md-cell=\\\"\\\">{{ media.time }}</td></tr></tbody></table></md-table-container></div><div class=\\\"success-message\\\" ng-show=\\\"notifier.isSuccessVisible()\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"notifier.hideSuccess()\\\">×</button> <strong>{{notifier.getSuccessMessage()}}</strong></div></div><div class=\\\"failure-message\\\" ng-show=\\\"notifier.isFailureVisible()\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"notifier.hideFailure()\\\">×</button> <strong>{{notifier.getFailureMessage()}}</strong></div>\");\n$templateCache.put(\"app/login/login.html\",\"<div id=\\\"login-page\\\" layout=\\\"column\\\" layout-padding=\\\"\\\" layout-align=\\\"center center\\\"><h2 class=\\\"md-display-3\\\">Login</h2><md-content layout=\\\"column\\\"><md-input-container><label>Username</label> <input type=\\\"text\\\" ng-model=\\\"user.username\\\" autofocus=\\\"\\\"></md-input-container><md-input-container><label>Password</label> <input type=\\\"password\\\" ng-model=\\\"user.password\\\"></md-input-container><md-button layout=\\\"row\\\" flex=\\\"\\\" style=\\\"width: 100%\\\" layout-align=\\\"start center\\\" class=\\\"md-primary md-raised\\\" ng-click=\\\"login.login(user)\\\">Login</md-button></md-content></div>\");\n$templateCache.put(\"app/playlist-detail/playlist-detail.html\",\"<style>\\r\\ntable, th , td  {\\r\\n  border: 1px solid grey;\\r\\n  border-collapse: collapse;\\r\\n  padding: 5px;\\r\\n}\\r\\ntable tr:nth-child(odd)\t{\\r\\n  background-color: #f1f1f1;\\r\\n}\\r\\ntable tr:nth-child(even) {\\r\\n  background-color: #ffffff;\\r\\n}\\r\\n.success-message {\\r\\n  display: block;\\r\\n\tbackground: #CCFFCC;\\r\\n\ttext-align: center;\\r\\n}\\r\\n.failure-message {\\r\\n  display: block;\\r\\n\tbackground: #FFCCCC;\\r\\n\ttext-align: center;\\r\\n}\\r\\n</style><div layout-padding=\\\"\\\"><h3>Playlist details</h3><b>Name:</b> <input type=\\\"text\\\" ng-model=\\\"playlist.name\\\" size=\\\"60\\\"><br><b>Description:</b> <input type=\\\"text\\\" ng-model=\\\"playlist.description\\\" size=\\\"60\\\"><br><b>Schedule:</b> (drag and drop to change order)<br><table style=\\\"width:auto;\\\" class=\\\"table table-bordered\\\"><thead><tr><th>Name</th><th>Description</th><th>URL</th><th>Type</th><th>Display time</th><th></th></tr></thead><tbody ui-sortable=\\\"\\\" ng-model=\\\"playlist.media_schedule\\\"><tr ng-repeat=\\\"media in playlist.media_schedule track by $index\\\" class=\\\"item\\\" style=\\\"cursor: move;\\\"><td>{{media.name}}</td><td>{{media.description}}</td><td>{{media.url}}</td><td>{{mediaTypes.labelFor(media.media_type)}}</td><td><input type=\\\"text\\\" ng-model=\\\"media.time\\\"></td><td><input type=\\\"submit\\\" value=\\\"Remove\\\" ng-click=\\\"removeMedia(media)\\\"></td></tr></tbody>{{list}}</table></div><div><h3>Available media</h3><table style=\\\"width:auto;\\\" class=\\\"table table-bordered\\\"><thead><tr><th>Name</th><th>Description</th><th>URL</th><th>Type</th><th></th></tr></thead><tbody ng-model=\\\"allMedia\\\"><tr ng-repeat=\\\"media in allMedia track by $index\\\" class=\\\"item\\\"><td>{{media.name}}</td><td>{{media.description}}</td><td>{{media.url}}</td><td>{{mediaTypes.labelFor(media.media_type)}}</td><td><input type=\\\"submit\\\" value=\\\"Add to playlist\\\" ng-click=\\\"addToPlaylist(media)\\\"></td></tr></tbody>{{list}}</table></div><br><input type=\\\"submit\\\" ng-click=\\\"savePlaylist()\\\" value=\\\"Save changes\\\"> <input type=\\\"submit\\\" ng-click=\\\"deletePlaylist()\\\" value=\\\"Delete playlist\\\"><div class=\\\"success-message\\\" ng-show=\\\"notifier.isSuccessVisible()\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"notifier.hideSuccess()\\\">×</button> <strong>{{notifier.getSuccessMessage()}}</strong></div><div class=\\\"failure-message\\\" ng-show=\\\"notifier.isFailureVisible()\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"notifier.hideFailure()\\\">×</button> <strong>{{notifier.getFailureMessage()}}</strong></div>\");\n$templateCache.put(\"app/media/media.html\",\"<div layout=\\\"column\\\" layout-padding=\\\"\\\"><md-card class=\\\"media-add__droparea md-accent\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" md-theme=\\\"altTheme\\\"><md-card-title><md-card-header-text><span class=\\\"md-title\\\">Add media by dragging and dropping it here</span><br><span class=\\\"md-subhead\\\">or press the \\\"add\\\" button</span></md-card-header-text></md-card-title><input name=\\\"the_file\\\" id=\\\"media-add__file\\\" type=\\\"file\\\" style=\\\"display: none;\\\"><div layout=\\\"row\\\" layout-sm=\\\"column\\\" layout-align=\\\"space-around\\\"><md-progress-circular md-mode=\\\"indeterminate\\\" ng-if=\\\"media.loading\\\"></md-progress-circular></div></md-card><div layout=\\\"column\\\" layout-align=\\\"start end\\\"><md-button ng-click=\\\"media.openFileBrowser()\\\" class=\\\"md-fab md-primary\\\" aria-label=\\\"Add Media\\\"><md-icon class=\\\"material-icons\\\">add</md-icon><md-tooltip>Add Media</md-tooltip></md-button></div><h3>Added media</h3><div><div class=\\\"media-added__filter\\\"><md-checkbox ng-model=\\\"visibilities.V\\\"><label>Show videos</label></md-checkbox><md-checkbox ng-model=\\\"visibilities.I\\\"><label>Show images</label></md-checkbox><md-checkbox ng-model=\\\"visibilities.W\\\"><label>Show web pages</label></md-checkbox></div><div><md-input-container style=\\\"width: 100%\\\"><span class=\\\"media-added__filter-text\\\"><label>Filter media</label> <input ng-model=\\\"filterParam\\\" type=\\\"text\\\" placeholder=\\\"Filter media\\\"></span></md-input-container></div></div><div class=\\\"media-added__media\\\"><md-table-container><table md-table=\\\"\\\"><thead md-head=\\\"\\\"><tr md-row=\\\"\\\"><th md-column=\\\"\\\">Name</th><th md-column=\\\"\\\">Description</th><th md-column=\\\"\\\">URL</th><th md-column=\\\"\\\">Type</th><th md-column=\\\"\\\">Actions</th></tr></thead><tbody md-body=\\\"\\\"><tr md-row=\\\"\\\" ng-repeat=\\\"media in getVisibleMedia()|filter:filterParam\\\"><td md-cell=\\\"\\\">{{media.name}}</td><td md-cell=\\\"\\\">{{media.description}}</td><td md-cell=\\\"\\\">{{media.url}}</td><td md-cell=\\\"\\\">{{mediaTypes.labelFor(media.media_type)}}</td><td md-cell=\\\"\\\"><md-button class=\\\"md-warn\\\" ng-click=\\\"removeMedia(media)\\\"><md-icon class=\\\"md-icons\\\">clear</md-icon>Remove</md-button></td></tr></tbody></table></md-table-container></div><div><h3>Add external media</h3><form layout=\\\"column\\\"><md-input-container><label>Name:</label> <input type=\\\"text\\\" ng-model=\\\"externalMedia.name\\\"></md-input-container><md-input-container><label>Description:</label> <input type=\\\"text\\\" ng-model=\\\"externalMedia.description\\\"></md-input-container><md-input-container><label>URL:</label> <input type=\\\"text\\\" ng-model=\\\"externalMedia.url\\\"></md-input-container><label>Type:</label><md-select ng-model=\\\"externalMedia.media_type\\\"><md-option disabled=\\\"\\\">Select Type</md-option><md-option ng-repeat=\\\"option in mediaTypes.types\\\" value=\\\"{{option.fieldName}}\\\">{{option.label}}</md-option></md-select><md-button class=\\\"md-raised md-primary\\\" type=\\\"submit\\\" ng-click=\\\"addExternalMedia(externalMedia)\\\">Add media</md-button></form></div></div><div class=\\\"success-message\\\" ng-show=\\\"notifier.isSuccessVisible()\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"notifier.hideSuccess()\\\">×</button> <strong>{{notifier.getSuccessMessage()}}</strong></div><div class=\\\"failure-message\\\" ng-show=\\\"notifier.isFailureVisible()\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"notifier.hideFailure()\\\">×</button> <strong>{{notifier.getFailureMessage()}}</strong></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div layout-gt-md=\\\"row\\\" layout=\\\"column\\\" flex=\\\"auto\\\" layout-padding=\\\"\\\"><md-card layout-align=\\\"center center\\\" ng-repeat=\\\"module in main.modules | orderBy:\\'rank\\'\\\"><md-card-content><md-icon class=\\\"material-icons large round-bg\\\">{{module.icon}}</md-icon></md-card-content><md-card-actions class=\\\"md-action-buttons\\\"><md-button ng-href=\\\"{{ module.url }}\\\">{{ module.description }}</md-button></md-card-actions></md-card></div>\");\n$templateCache.put(\"app/playlists/playlists.html\",\"<div layout-padding=\\\"\\\"><h3>Playlists</h3><md-table-container><table md-table=\\\"\\\"><thead md-head=\\\"\\\"><tr md-row=\\\"\\\"><th md-column=\\\"\\\">Name</th><th md-column=\\\"\\\">Description</th><th md-column=\\\"\\\">Items</th><th md-column=\\\"\\\"></th></tr></thead><tbody md-body=\\\"\\\"><tr md-row=\\\"\\\" ng-repeat=\\\"playlist in playlists.playlists\\\" class=\\\"item\\\"><td md-cell=\\\"\\\">{{playlist.name}}</td><td md-cell=\\\"\\\">{{playlist.description}}</td><td md-cell=\\\"\\\">{{playlist.media_schedule.length}}</td><td md-cell=\\\"\\\"><md-button class=\\\"md-primary\\\" ng-click=\\\"editPlaylist(playlist)\\\">Details</md-button></td></tr></tbody></table></md-table-container><md-button class=\\\"md-primary md-raised\\\" ng-click=\\\"createNewPlaylist()\\\">New playlist</md-button></div>\");\n$templateCache.put(\"app/stats/stats.html\",\"<div layout-padding=\\\"\\\"><div><select ng-model=\\\"selectedDevice\\\" ng-options=\\\"device as device.name for device in devices\\\"><option value=\\\"\\\" disabled=\\\"\\\">Device</option></select></div><div class=\\\"media-added__media\\\"><table style=\\\"width:auto;\\\" class=\\\"table table-bordered\\\"><thead><th>Type</th><th>Category</th><th>Description</th><th>Timestamp</th></thead><tbody ng-repeat=\\\"stat in getSelectedStats()\\\"><td>{{getStatTypeString(stat)}}</td><td>{{stat.category}}</td><td>{{stat.description}}</td><td>{{stat.time}}</td></tbody></table></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<md-toolbar layout=\\\"row\\\" layout-align=\\\"space-between center\\\" ng-show=\\\"vm.getLogin()\\\"><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleSidenav()\\\" hide-gt-md=\\\"\\\" aria-label=\\\"Menu\\\"><md-icon class=\\\"material-icons\\\">menu</md-icon></md-button><md-button hide=\\\"\\\" show-gt-md=\\\"\\\" href=\\\"#/\\\" hide-lt-md=\\\"\\\">{{vm.title}}</md-button><span><md-menu md-position-mode=\\\"target-right target\\\"><md-button aria-label=\\\"Account\\\" ng-click=\\\"$mdOpenMenu($event)\\\"><md-icon class=\\\"material-icons\\\">account_circle</md-icon>{{vm.getUsername()}}</md-button><md-menu-content width=\\\"4\\\"><md-menu-item><md-button href=\\\"#/account\\\" ng-click=\\\"$mdCloseMenu($event)\\\"><div layout=\\\"row\\\"><md-icon class=\\\"material-icons\\\">rowing</md-icon>Account</div></md-button></md-menu-item><md-menu-item><md-button href=\\\"#/login\\\" ng-click=\\\"$mdCloseMenu($event)\\\"><div layout=\\\"row\\\"><md-icon class=\\\"material-icons\\\">exit_to_app</md-icon>Logout</div></md-button></md-menu-item></md-menu-content></md-menu></span></md-toolbar>\");\n$templateCache.put(\"app/components/sidenav/sidenav.html\",\"<md-sidenav class=\\\"md-sidenav-left\\\" md-component-id=\\\"left\\\" md-is-locked-open=\\\"$mdMedia(\\'gt-md\\')\\\" ng-show=\\\"sidenav.getLogin()\\\"><md-toolbar hide-gt-md=\\\"\\\" class=\\\"md-tall md-hue-2\\\"><md-button class=\\\"content-left\\\" hide-gt-md=\\\"\\\" ng-click=\\\"sidenav.close()\\\" flex=\\\"\\\"><md-icon class=\\\"material-icons\\\">close</md-icon>Close Navigation</md-button><span flex=\\\"\\\"></span><div layout=\\\"column\\\" class=\\\"md-toolbar-tools-bottom inset\\\"><span></span><div>{{sidenav.title}}</div></div></md-toolbar><md-list><md-item hide-gt-md=\\\"\\\"><md-item-content layout=\\\"row\\\" layout-align=\\\"start center\\\" style=\\\"width: 100%\\\"><md-button class=\\\"content-left\\\" ng-href=\\\"#/\\\" flex=\\\"\\\"><md-icon class=\\\"material-icons\\\">home</md-icon>Home</md-button></md-item-content></md-item><md-divider hide-gt-md=\\\"\\\"></md-divider><md-subheader>Management</md-subheader><md-item ng-repeat=\\\"module in sidenav.modules | orderBy:\\'rank\\'\\\" style=\\\"width: 100%\\\"><md-item-content layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-button class=\\\"content-left\\\" ng-href=\\\"{{ module.url }}\\\" flex=\\\"\\\">{{ module.description }}</md-button></md-item-content></md-item></md-list></md-sidenav>\");\n$templateCache.put(\"app/templates/toast/toast.html\",\"<md-toast><span flex=\\\"\\\">{{ toast.message }}!</span><md-button ng-click=\\\"closeToast()\\\">Close</md-button></md-toast>\");}]);"],"sourceRoot":"/source/"}