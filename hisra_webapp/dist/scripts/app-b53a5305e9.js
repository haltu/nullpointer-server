!function(){"use strict";angular.module("hisraWebapp",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ngRoute","ngMaterial","toastr","ngResource","ui.sortable","md.data.table"])}(),/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
* http://jqueryui.com
* Includes: widget.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,a,o;for(o=0;null!=(a=i[o]);o++)try{n=e._data(a,"events"),n&&n.remove&&e(a).triggerHandler("remove")}catch(r){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var a,o,r,s,l={},d=t.split(".")[0];return t=t.split(".")[1],a=d+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[d]=e[d]||{},o=e[d][t],r=e[d][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),s=new i,s.options=e.widget.extend({},s.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=a,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),r.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},l,{constructor:r,namespace:d,widgetName:t,widgetFullName:a}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var n,a,o=i.call(arguments,1),r=0,s=o.length;s>r;r++)for(n in o[r])a=o[r][n],o[r].hasOwnProperty(n)&&void 0!==a&&(e.isPlainObject(a)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],a):e.widget.extend({},a):t[n]=a);return t},e.widget.bridge=function(t,n){var a=n.prototype.widgetFullName||t;e.fn[t]=function(o){var r="string"==typeof o,s=i.call(arguments,1),l=this;return r?this.each(function(){var i,n=e.data(this,a);return"instance"===o?(l=n,!1):n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,s),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,a);t?(t.option(o||{}),t._init&&t._init()):e.data(this,a,new n(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,a,o,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},n=t.split("."),t=n.shift(),n.length){for(a=r[t]=e.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)a[n[o]]=a[n[o]]||{},a=a[n[o]];if(t=n.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var a,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=a=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),e.each(n,function(n,r){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(s.guid=r.guid=r.guid||s.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+o.eventNamespace,u=l[2];u?a.delegate(u,d,s):i.bind(d,s)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(a in o)a in i||(i[a]=o[a]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,a,o){"string"==typeof a&&(a={effect:a});var r,s=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=o,a.delay&&n.delay(a.delay),r&&e.effects&&e.effects.effect[s]?n[t](a):s!==t&&n[s]?n[s](a.duration,a.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}});e.widget}),/*
 * jQuery File Upload Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var a=n.dataTransfer;a&&-1!==e.inArray("Files",a.types)&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(a.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,a=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&a-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=a,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(a,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(a,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,a=t.files[0],o=t.multipart||!e.support.xhrFileUpload,r="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",a)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(a.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:r,value:t.blob}):e.each(t.files,function(n,a){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||r,value:a})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(r,t.blob,a.name):e.each(t.files,function(a,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append("array"===e.type(t.paramName)&&t.paramName[a]||r,o,o.uploadName||o.name)})),t.data=i):(t.contentType=a.type||"application/octet-stream",t.data=t.blob||a),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",a=(t.prop("files")||[1]).length;a;)n.push(i),a-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var a=e.Deferred(),o=a.promise();return i=i||this.options.context||o,t===!0?a.resolveWith(i,n):t===!1&&a.rejectWith(i,n),o.abort=a.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var n=this,a=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,o){return(t||o)&&(i._processQueue=this._processQueue=(this._processQueue||a([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():a(arguments)}).pipe(t,o)),this._processQueue||a([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,a,o=this,r=t.files[0],s=r.size,l=t.uploadedBytes,d=t.maxChunkSize||s,u=this._blobSlice,c=e.Deferred(),p=c.promise();return this._isXHRUpload(t)&&u&&(l||s>d)&&!t.data?i?!0:l>=s?(r.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",r.error])):(a=function(){var i=e.extend({},t),p=i._progress.loaded;i.blob=u.call(r,l,l+d,r.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+s,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,r,d){l=o._getUploadedBytes(d)||l+i.chunkSize,p+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=r,i.jqXHR=d,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),s>l?a():c.resolveWith(i.context,[n,r,d])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),c.rejectWith(i.context,[e,t,n])})},this._enhancePromise(p),p.abort=function(){return n.abort()},a(),p):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,a){var o=a._progress.total,r=a._response;a._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),a),r.result=a.result=t,r.textStatus=a.textStatus=i,r.jqXHR=a.jqXHR=n,this._trigger("done",null,a)},_onFail:function(e,t,i,n){var a=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),a.jqXHR=n.jqXHR=e,a.textStatus=n.textStatus=t,a.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,a,o,r,s=this,l=s._getAJAXSettings(i),d=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,n=n||((a||s._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&s._getXHRPromise(!1,l.context,a)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){s._onDone(e,t,i,l)}).fail(function(e,t,i){s._onFail(e,t,i,l)}).always(function(e,t,i){if(s._onAlways(e,t,i,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var n=s._slots.shift();n;){if("pending"===s._getDeferredState(n)){n.resolve();break}n=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),r=o.pipe(d)):(this._sequence=this._sequence.pipe(d,d),r=this._sequence),r.abort=function(){return a=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(l.context,a),d())},this._enhancePromise(r)):d()},_onAdd:function(t,i){var n,a,o,r,s=this,l=!0,d=e.extend({},this.options,i),u=i.files,c=u.length,p=d.limitMultiFileUploads,m=d.limitMultiFileUploadSize,h=d.limitMultiFileUploadSizeOverhead,f=0,g=this._getParamName(d),v=0;if(!c)return!1;if(m&&void 0===u[0].size&&(m=void 0),(d.singleFileUploads||p||m)&&this._isXHRUpload(d))if(d.singleFileUploads||m||!p)if(!d.singleFileUploads&&m)for(o=[],n=[],r=0;c>r;r+=1)f+=u[r].size+h,(r+1===c||f+u[r+1].size+h>m||p&&r+1-v>=p)&&(o.push(u.slice(v,r+1)),a=g.slice(v,r+1),a.length||(a=g),n.push(a),v=r+1,f=0);else n=g;else for(o=[],n=[],r=0;c>r;r+=p)o.push(u.slice(r,r+p)),a=g.slice(r,r+p),a.length||(a=g),n.push(a);else o=[u],n=[g];return i.originalFiles=u,e.each(o||u,function(a,r){var d=e.extend({},i);return d.files=o?r:[r],d.paramName=n[a],s._initResponseObject(d),s._initProgressObject(d),s._addConvenienceMethods(t,d),l=s._trigger("add",e.Event("add",{delegatedEvent:t}),d)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0),a=i.is(document.activeElement);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),a&&n.focus(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,a=this,o=e.Deferred(),r=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},s=function(e){a._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(r)},l=function(){n.readEntries(function(e){e.length?(d=d.concat(e),l()):s(d)},r)},d=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},r):t.isDirectory?(n=t.createReader(),l()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,a=t.prop("webkitEntries")||t.prop("entries");if(a&&a.length)return this._handleFileTreeEntries(a);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(a){n.files=a,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,a={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){a.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),a)!==!1&&i._onAdd(t,a)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=this.element.data();e.each(this.element[0].attributes,function(e,a){var o,r=a.name.toLowerCase();/^data-/.test(r)&&(r=r.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),o=n[r],t._isRegExpOption(r,o)&&(o=t._getRegExp(o)),i[r]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,a=this,o=e.Deferred(),r=o.promise();return r.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),r)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void o.reject();t.files=e,i=a._onSend(null,t),i.then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)})}}),this._enhancePromise(r)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(){"use strict";function e(e){function t(t,i,n,a){var o,r=e(i[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});i.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(e){r.type(e).pause()["delete"]()}),o=t.$watch("vm.contributors",function(){angular.forEach(a.contributors,function(e){r.type(e.login).pause()["delete"]()})}),t.$on("$destroy",function(){o()})}function i(e,t){function i(){return n().then(function(){e.info("Activated Contributors View")})}function n(){return t.getContributors(10).then(function(e){return a.contributors=e,a.contributors})}var a=this;a.contributors=[],i()}var n={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:t,controller:i,controllerAs:"vm"};return i.$inject=["$log","githubContributor"],n}angular.module("hisraWebapp").directive("acmeMalarkey",e),e.$inject=["malarkey"]}(),/*
 * jQuery Iframe Transport Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,a,o,r=i.initialIframeSrc||"javascript:false;";return{send:function(s,l){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),o=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+o+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+o+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+o+"_method=PATCH",i.type="POST"),t+=1,a=e('<iframe src="'+r+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(i.paramName)?i.paramName:[i.paramName];a.unbind("load").bind("load",function(){var t;try{if(t=a.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+r+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",a.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",o[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var a=e(t[i]);e(n).prop("name",a.prop("name")).attr("form",a.attr("form")),a.replaceWith(n)})}),n.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src",r),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(){"use strict";function e(){function e(e,t,i,n){function a(){var e=i.getCurrentUser();return void 0===e?!1:!0}function o(){n("left").toggle().then(function(){})}var r=this;r.getLogin=a,r.toggleSidenav=o,r.getUsername=function(){var e=i.getCurrentUser();return void 0===e?"Anonymous":e.username},r.relativeDate=e(r.creationDate).fromNow(),r.title="HISRA Management"}var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return e.$inject=["moment","User","Authentication","$mdSidenav"],t}angular.module("hisraWebapp").directive("acmeNavbar",e)}(),function(){"use strict";function e(){function e(e,t,i,n){function a(){r()}function o(){var t=e.getCurrentUser();return void 0==t?!1:!0}function r(){l.modules=i.getTec()}function s(){n("left").close().then(function(){$log.debug("closed")})}var l=this;l.title="Hisra Management",l.modules=[],l.getLogin=o,l.getModules=r,l.close=s,a()}var t={restrict:"E",templateUrl:"app/components/sidenav/sidenav.html",controller:e,controllerAs:"sidenav",bindToController:!0};return e.$inject=["Authentication","User","webDevTec","$mdSidenav"],t}angular.module("hisraWebapp").directive("sideNav",e)}(),function(){"use strict";function e(){function e(){return t}var t=[{title:"Devices",url:"/#/devices",description:"Manage devices",icon:"devices"},{title:"Playlists",url:"/#/playlists",description:"Manage playlists",icon:"list"},{title:"Media",url:"/#/media",description:"Manage media",icon:"video_library"},{title:"Statistics",url:"/#/stats",description:"Examine system statistics",icon:"assessment"}];this.getTec=e}angular.module("hisraWebapp").service("webDevTec",e)}(),function(){"use strict";angular.module("hisraWebapp").constant("BASE_URL","http://192.168.1.60:8000")}(),function(){"use strict";function e(e,t,i){e.debugEnabled(!0),t.theme("default").primaryPalette("blue").accentPalette("pink"),t.theme("altTheme").backgroundPalette("blue-grey").dark(),i.allowHtml=!0,i.timeOut=3e3,i.positionClass="toast-top-right",i.preventDuplicates=!0,i.progressBar=!0}angular.module("hisraWebapp").config(e),e.$inject=["$logProvider","$mdThemingProvider","toastrConfig"]}(),function(){"use strict";angular.module("hisraWebapp").constant("malarkey",malarkey).constant("moment",moment)}(),function(){"use strict";function e(e){e.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).otherwise({redirectTo:"/"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e){e.debug("runBlock end")}angular.module("hisraWebapp").run(e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t,i,n){var a=i.getCurrentUser();if(void 0===a)return n.path("/login");var o=this,r=t.$get({username:a.username},function(){console.log("Success: got user"),o.user=r},function(){console.log("Failure: could not get user")}).then(function(e){console.dir(e),o.user=e});e.logout=function(){i.logout(),n.path("/login")},e.updateUser=function(e){}}angular.module("hisraWebapp").controller("AccountController",e),e.$inject=["$scope","User","Authentication","$location"]}(),function(){"use strict";function e(e){e.when("/account",{templateUrl:"app/account/account.html",controller:"AccountController",controllerAs:"vm"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t,i,n,a,o,r){function s(t,i,n){t.playlist=i,t.$update(n,function(){e.notifier.showSuccess("Device playlist set")},function(){e.notifier.showFailure("Could not set device playlist")})}function l(){e.selectedDevice=null,e.selectedPlaylist=null}var d=this;d.deviceMap={},d.playlistMap={},d.errorMessage="",d.clearSelections=l;var u=i.getCurrentUser();return void 0===u?t.path("/login"):(e.notifier=r.createNotifier(),n.getDevices({username:u.username}).$promise.then(function(e){e.map(function(e){d.deviceMap[e.id]=e})}),n.getPlaylists({username:u.username}).$promise.then(function(e){e.map(function(e){d.playlistMap[e.id]=e,d.playlistMap[e.id].media_schedule_json=JSON.parse(d.playlistMap[e.id].media_schedule_json)})}),e.mediaTypes=o,e.selectedDevice=null,e.$watch("selectedDevice",function(t,i){e.selectedDevice=t,void 0!=t&&(console.log(t),e.selectedPlaylist=d.playlistMap[t.playlist])}),e.refreshConfirmed=function(){if(e.selectedDevice)var t=a.get({username:u.username,id:e.selectedDevice.id},function(){e.selectedDevice.playlist=t.playlist,e.selectedDevice.confirmed_playlist=t.confirmed_playlist,e.selectedDevice.confirmed_playlist_update_time=t.confirmed_playlist_update_time,e.notifier.showSuccess("Refresh complete")},function(){e.notifier.showFailure("Could not fetch device info")})},e.isConfirmed=function(t){return t&&e.selectedDevice?e.selectedDevice.confirmed_playlist==t.id&&e.selectedDevice.confirmed_playlist_update_time==t.updated:""},void(e.setDevicePlaylist=function(e,t){if(void 0===e||void 0===t)return void(d.errorMessage="You must select a device and a playlist");d.errorMessage="";var i={username:u.username,id:e.id};a.get(i,function(e){s(e,t.id,i)},function(){console.log("Device playlist update failed"),d.errorMessage="Could not update device playlist"})}))}angular.module("hisraWebapp").controller("DevicesController",e),e.$inject=["$scope","$location","Authentication","User","Device","MediaTypes","Notification"]}(),function(){"use strict";function e(e){e.when("/devices",{templateUrl:"app/devices/devices.html",controller:"DevicesController",controllerAs:"devices"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function i(){e.logout()}var n=this;i(),n.login=function(i){e.login(i.username,i.password).then(function(){t.path("/")})}}angular.module("hisraWebapp").controller("LoginController",e),e.$inject=["Authentication","$location"]}(),function(){"use strict";function e(e){e.when("/login",{templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"login"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t,i,n,a){function o(){s(),i(function(){d.classAnimation="rubberBand"},4e3)}function r(){a.info("Hello!"),d.classAnimation=""}function s(){d.modules=n.getTec()}var l=e.getCurrentUser();if(console.dir(l),void 0===l)return t.path("/login");var d=this;d.modules=[],d.classAnimation="",d.creationDate=1447844996577,d.showToastr=r,o()}angular.module("hisraWebapp").controller("MainController",e),e.$inject=["Authentication","$location","$timeout","webDevTec","toastr"]}(),function(){"use strict";function e(e,t,i,n,a,o,r,s,l){function d(e,t){function i(e){s.append(e.target.result),r++,o>r?n():p=s.end()}function n(){var n=new FileReader;n.onload=i;var o=r*t,s=Math.min(o+t,e.size);n.readAsArrayBuffer(a.call(e,o,s))}var a=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=Math.ceil(e.size/t),r=0,s=new SparkMD5.ArrayBuffer;n()}var u=t.getCurrentUser();if(void 0===u)return n.path("/");var c=this;c.BASE_URL=r,c.loading=!1,e.notifier=l.createNotifier(),e.allMedia=[],e.visibilities={I:!0,V:!0,W:!0},e.visibleMedia=[],e.getVisibleMedia=function(){return e.visibleMedia=e.allMedia.filter(function(t){return e.visibilities[t.media_type]}),e.visibleMedia},a.getMedia({username:u.username}).$promise.then(function(t){e.allMedia=t}),e.mediaTypes=s,e.removeMedia=function(t){c.loading=!1,o["delete"]({username:u.username,id:t.id},null,function(){e.notifier.showSuccess("Removed media from server"),e.allMedia=e.allMedia.filter(function(e){return e.id!=t.id}),e.getVisibleMedia()},function(){e.notifier.showFailure("Could not remove media from server")})},e.externalMedia={},e.addExternalMedia=function(t){var i=o.save({username:u.username},t,function(){e.notifier.showSuccess("Media added"),e.allMedia.push(i),e.getVisibleMedia().$promise.then(function(e){e.loading=!0})},function(){notifer.showFailure("Could not add media").$promise.then(function(e){e.loading=!1})})},c.openFileBrowser=function(){document.getElementById("media-add__file").click()};var p="",m=[];$("#media-add__file").fileupload({url:r+"/api/chunked_upload/",dataType:"json",autoUpload:!0,maxChunkSize:1e5,formData:m,xhrFields:{withCredentials:!0},beforeSend:function(e){e.setRequestHeader("Authorization","Token "+u.token)},add:function(e,t){m.splice(1),d(t.files[0],1e5),t.submit()},chunkdone:function(e,t){m.length<2&&m.push({name:"upload_id",value:t.result.upload_id})},done:function(t,i){$.ajax({beforeSend:function(e){e.setRequestHeader("Authorization","Token "+u.token)},xhrFields:{withCredentials:!0},type:"POST",url:r+"/api/chunked_upload_complete/",data:{upload_id:i.result.upload_id,md5:p},dataType:"json",success:function(t){e.notifier.showSuccess("Created media")}})}})}angular.module("hisraWebapp").controller("MediaController",e),e.$inject=["$scope","Authentication","$cookieStore","$location","User","Media","BASE_URL","MediaTypes","Notification"]}(),function(){"use strict";function e(e){e.when("/media",{templateUrl:"app/media/media.html",controller:"MediaController",controllerAs:"media"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t,i,n,a,o,r,s,l,d){var u=a.getCurrentUser();return void 0===u?t.path("/login"):(e.allMedia=[],o.getMedia({username:u.username}).$promise.then(function(t){e.allMedia=t,console.dir(t)}),e.mediaTypes=l,e.addToPlaylist=function(t){t.time=20,e.playlist.media_schedule.push(t)},e.savePlaylist=function(){var t=angular.copy(e.playlist);t.media_schedule_json=JSON.stringify(t.media_schedule),delete t.media_schedule,r.update({username:u.username,id:t.id},t,function(){e.notifier.showSuccess("Saved playlist")},function(){e.notifier.showFailure("Failed to save playlist")})},e.removeMedia=function(t){var i=e.playlist.media_schedule.indexOf(t);-1!=i&&e.playlist.media_schedule.splice(i,1)},r.get({id:n.playlistId,username:u.username}).$promise.then(function(t){var i=t.media_schedule_json;t.media_schedule=JSON.parse(i),e.playlist=t}),e.deletePlaylist=function(){var i=confirm("Are you sure you want to delete the playlist?");i&&r["delete"]({username:u.username,id:e.playlist.id},null,function(){t.path("/playlists")},function(){e.notifier.showFailure("FAILURE: Could not delete playlist")})},void(e.notifier=d.createNotifier()))}angular.module("hisraWebapp").controller("PlaylistDetailController",e),e.$inject=["$scope","$location","$timeout","$routeParams","Authentication","User","Playlist","Media","MediaTypes","Notification"]}(),function(){"use strict";function e(e){e.when("/playlist/:playlistId",{templateUrl:"app/playlist-detail/playlist-detail.html",controller:"PlaylistDetailController",controllerAs:"playlist"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t,i,n,a){var o=this,r=i.getCurrentUser();return void 0===r?e.path("/login"):(o.playlists=[],n.getPlaylists({username:r.username}).$promise.then(function(e){o.playlists=e.map(function(e){var t=e.media_schedule_json;return e.media_schedule=JSON.parse(t),e})}),t.createNewPlaylist=function(){var t=a.save({username:r.username},{name:"New playlist",description:"",media_schedule_json:"[]"},function(){e.path("/playlist/"+t.id)},function(){console.log("Failed to create new playlist")})},void(t.editPlaylist=function(t){e.path("/playlist/"+t.id)}))}angular.module("hisraWebapp").controller("PlaylistsController",e),e.$inject=["$location","$scope","Authentication","User","Playlist"]}(),function(){"use strict";function e(e){e.when("/playlists",{templateUrl:"app/playlists/playlists.html",controller:"PlaylistsController",controllerAs:"playlists"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t,i){function n(n,a){return e.post(i+"/api/authentication",{username:n,password:a}).then(function(i){var a={username:n,token:i.data.token};t.sessionStorage&&t.sessionStorage.setItem("currentUser",JSON.stringify(a)),r.currentUser=a,e.defaults.headers.common.Authorization="Token "+a.token})}function a(){r.currentUser=void 0,t.sessionStorage&&t.sessionStorage.setItem("currentUser",void 0),delete e.defaults.headers.common.Authorization}function o(){if(void 0!==r.currentUser)return r.currentUser;if(t.sessionStorage){var i=t.sessionStorage.getItem("currentUser");if(i&&"undefined"!=i)return i=JSON.parse(i),e.defaults.headers.common.Authorization="Token "+i.token,r.currentUser=i,i}return void 0}var r={currentUser:void 0},s={};return s.login=n,s.logout=a,s.getCurrentUser=o,s}angular.module("hisraWebapp").factory("Authentication",e),e.$inject=["$http","$window","BASE_URL"]}(),function(){"use strict";function e(e,t){return e(t+"/api/user/:username/device/:id",{id:"@id"},{update:{method:"PUT"}})}function t(e,t){return e(t+"/api/user/:username/device/:id/statistics",{id:"@id"})}angular.module("hisraWebapp").factory("Device",e).factory("Statistics",t),e.$inject=["$resource","BASE_URL"],t.$inject=["$resource","BASE_URL"]}(),function(){"use strict";function e(e,t){return e(t+"/api/user/:username/media/:id",{id:"@id"})}function t(){return{types:[{label:"Web page",fieldName:"W"},{label:"Video",fieldName:"V"},{label:"Image",fieldName:"I"}],labelFor:function(e){for(var t=0;t<this.types.length;++t)if(this.types[t].fieldName==e)return this.types[t].label},fieldNameFor:function(e){for(var t=0;t<this.types.length;++t)if(this.types[t].label==e)return this.types[t].fieldName}}}angular.module("hisraWebapp").factory("Media",e).factory("MediaTypes",t),e.$inject=["$resource","BASE_URL"]}(),function(){"use strict";function e(e,t){return{createNotifier:function(){return{fadeTime:6e3,visibility:{failure:!1,success:!1},message:{failure:"Default success",success:"Default fail"},showMessage:function(t,i){this.visibility[t]=!0,this.message[t]=i;var n=this;e(function(){n.hideMessage(t),console.log("Timeout called")},n.fadeTime)},hideMessage:function(e){this.visibility[e]=!1},showSuccess:function(e){this.showMessage("success",e)},showFailure:function(e){this.showMessage("failure",e)},isVisible:function(e){return this.visibility[e]},isSuccessVisible:function(){return this.isVisible("success")},isFailureVisible:function(){return this.isVisible("failure")},hideSuccess:function(){this.hideMessage("success")},hideFailure:function(){this.hideMessage("failure")},getMessage:function(e){return this.message[e]},getSuccessMessage:function(){return this.getMessage("success")},getFailureMessage:function(){return this.getMessage("failure")}}}}}angular.module("hisraWebapp").factory("Notification",e),e.$inject=["$timeout","BASE_URL"]}(),function(){"use strict";function e(e,t){return e(t+"/api/user/:username/playlist/:id",{id:"@id"},{update:{method:"PUT"}})}angular.module("hisraWebapp").factory("Playlist",e),e.$inject=["$resource","BASE_URL"]}(),function(){"use strict";function e(e,t,i,n,a){var o=e(a+"/api/user/:username",{username:"@username"});return angular.extend(o.prototype,{getMedia:function(e){return e=e||{},e.username=e.username||this.username,t.query(e)},getPlaylists:function(e){return e=e||{},e.username=e.username||this.username,i.query(e)},getDevices:function(e){return e=e||{},e.username=e.username||this.username,n.query(e)}})}angular.module("hisraWebapp").factory("User",e),e.$inject=["$resource","Media","Playlist","Device","BASE_URL"]}(),function(){"use strict";function e(e,t,i,n,a,o){function r(e){var t=l[e.id];return t?t:(t=a.query({username:s.username,id:e.id},function(){console.log("SUCCESS fetching stats")},function(){console.log("FAILURE fetching stats")}),l[e.id]=t,t)}var s=e.getCurrentUser();void 0===s&&t.path("/login"),i.getDevices({username:s.username}).$promise.then(function(e){console.dir(e),o.devices=e}),o.getSelectedStats=function(){return o.selectedDevice?r(o.selectedDevice):[]};var l={};o.getStatTypeString=function(e){return 0===e.type?"Error":1===e.type?"Success":void 0}}angular.module("hisraWebapp").controller("StatsController",e),e.$inject=["Authentication","$location","User","Device","Statistics","$scope"]}(),function(){"use strict";function e(e){e.when("/stats",{templateUrl:"app/stats/stats.html",controller:"StatsController",controllerAs:"stats"})}angular.module("hisraWebapp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e){var t=this;t.closeToast=function(){e.hide()}}angular.module("hisraWebapp").controller("ToastController",e),e.$inject=["$mdToast"]}(),angular.module("hisraWebapp").run(["$templateCache",function(e){e.put("app/account/account.html",'<div layout-padding="" layout="column" layout-align="start start"><h2>{{vm.user.username}}</h2><form novalidate="" class="simple-form">First name: {{vm.user.first_name}}<br>Last name: {{vm.user.last_name}}<br>Email: {{vm.user.email}}<br></form><md-button class="md-primary md-raised" ng-click="logout()"><md-icon class="md-icons">exit_to_app</md-icon>Logout</md-button></div>'),e.put("app/devices/devices.html",'<div layout-padding=""><form name="devicesForm"><h3>Your devices</h3><md-input-container class="md-block"><md-select ng-model="selectedDevice" name="selectedDevice" placeholder="Device"><md-option disabled="">Device</md-option><md-option ng-repeat="device in devices.deviceMap">{{device.name}}</md-option></md-select><div class="error" ng-messages="devicesForm.deviceSelection.$error"><div ng-message="noselection">{{devices.errorMessage}}</div></div></md-input-container><md-input-container class="md-block"><md-select ng-model="selectedPlaylist" placeholder="Playlist"><md-option disabled="">Playlist</md-option><md-option ng-repeat="playlist in devices.playlistMap">{{playlist.name}}</md-option></md-select></md-input-container><md-button class="md-raised" ng-click="devices.clearSelections()">Clear Selections</md-button><md-button class="md-primary md-raised" ng-click="setDevicePlaylist(selectedDevice, selectedPlaylist)">Set Device Playlist</md-button><div style="color: #F00">{{devices.errorMessage}}</div></form><div><h3>Playlist details</h3><b>Name:</b> {{selectedPlaylist.name}}<br><b>Description:</b> {{selectedPlaylist.description}}<br><b>Confirmed in use by device:</b> {{isConfirmed(selectedPlaylist)}} <input type="submit" value="Refresh" ng-click="refreshConfirmed()"><br><b>Schedule:</b><br><md-table-container><table md-table="" class="table table-hover table-mc-light-blue"><thead md-head=""><tr md-row=""><th md-column="">Name</th><th md-column="">Description</th><th md-column="">URL</th><th md-column="">Type</th><th md-column="">Display time</th></tr></thead><tbody md-body=""><tr md-row="" ng-repeat="media in selectedPlaylist.media_schedule_json track by $index"><td md-cell="">{{media.name}}</td><td md-cell="">{{media.description}}</td><td md-cell="">{{ media.url }}</td><td md-cell="">{{ mediaTypes.labelFor(media.media_type) }}</td><td md-cell="">{{ media.time }}</td></tr></tbody></table></md-table-container></div><div class="success-message" ng-show="notifier.isSuccessVisible()"><button type="button" class="close" data-ng-click="notifier.hideSuccess()">×</button> <strong>{{notifier.getSuccessMessage()}}</strong></div></div><div class="failure-message" ng-show="notifier.isFailureVisible()"><button type="button" class="close" data-ng-click="notifier.hideFailure()">×</button> <strong>{{notifier.getFailureMessage()}}</strong></div>'),e.put("app/login/login.html",'<div id="login-page" layout="column" layout-padding="" layout-align="center center"><h2 class="md-display-3">Login</h2><md-content layout="column"><md-input-container><label>Username</label> <input type="text" ng-model="user.username" autofocus=""></md-input-container><md-input-container><label>Password</label> <input type="password" ng-model="user.password"></md-input-container><md-button layout="row" flex="" style="width: 100%" layout-align="start center" class="md-primary md-raised" ng-click="login.login(user)">Login</md-button></md-content></div>'),e.put("app/playlist-detail/playlist-detail.html",'<style>\r\ntable, th , td  {\r\n  border: 1px solid grey;\r\n  border-collapse: collapse;\r\n  padding: 5px;\r\n}\r\ntable tr:nth-child(odd)	{\r\n  background-color: #f1f1f1;\r\n}\r\ntable tr:nth-child(even) {\r\n  background-color: #ffffff;\r\n}\r\n.success-message {\r\n  display: block;\r\n	background: #CCFFCC;\r\n	text-align: center;\r\n}\r\n.failure-message {\r\n  display: block;\r\n	background: #FFCCCC;\r\n	text-align: center;\r\n}\r\n</style><div layout-padding=""><h3>Playlist details</h3><b>Name:</b> <input type="text" ng-model="playlist.name" size="60"><br><b>Description:</b> <input type="text" ng-model="playlist.description" size="60"><br><b>Schedule:</b> (drag and drop to change order)<br><table style="width:auto;" class="table table-bordered"><thead><tr><th>Name</th><th>Description</th><th>URL</th><th>Type</th><th>Display time</th><th></th></tr></thead><tbody ui-sortable="" ng-model="playlist.media_schedule"><tr ng-repeat="media in playlist.media_schedule track by $index" class="item" style="cursor: move;"><td>{{media.name}}</td><td>{{media.description}}</td><td>{{media.url}}</td><td>{{mediaTypes.labelFor(media.media_type)}}</td><td><input type="text" ng-model="media.time"></td><td><input type="submit" value="Remove" ng-click="removeMedia(media)"></td></tr></tbody>{{list}}</table></div><div><h3>Available media</h3><table style="width:auto;" class="table table-bordered"><thead><tr><th>Name</th><th>Description</th><th>URL</th><th>Type</th><th></th></tr></thead><tbody ng-model="allMedia"><tr ng-repeat="media in allMedia track by $index" class="item"><td>{{media.name}}</td><td>{{media.description}}</td><td>{{media.url}}</td><td>{{mediaTypes.labelFor(media.media_type)}}</td><td><input type="submit" value="Add to playlist" ng-click="addToPlaylist(media)"></td></tr></tbody>{{list}}</table></div><br><input type="submit" ng-click="savePlaylist()" value="Save changes"> <input type="submit" ng-click="deletePlaylist()" value="Delete playlist"><div class="success-message" ng-show="notifier.isSuccessVisible()"><button type="button" class="close" data-ng-click="notifier.hideSuccess()">×</button> <strong>{{notifier.getSuccessMessage()}}</strong></div><div class="failure-message" ng-show="notifier.isFailureVisible()"><button type="button" class="close" data-ng-click="notifier.hideFailure()">×</button> <strong>{{notifier.getFailureMessage()}}</strong></div>'),e.put("app/media/media.html",'<div layout="column" layout-padding=""><md-card class="media-add__droparea md-accent" layout="column" layout-align="center center" md-theme="altTheme"><md-card-title><md-card-header-text><span class="md-title">Add media by dragging and dropping it here</span><br><span class="md-subhead">or press the "add" button</span></md-card-header-text></md-card-title><input name="the_file" id="media-add__file" type="file" style="display: none;"><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate" ng-if="media.loading"></md-progress-circular></div></md-card><div layout="column" layout-align="start end"><md-button ng-click="media.openFileBrowser()" class="md-fab md-primary" aria-label="Add Media"><md-icon class="material-icons">add</md-icon><md-tooltip>Add Media</md-tooltip></md-button></div><h3>Added media</h3><div><div class="media-added__filter"><md-checkbox ng-model="visibilities.V"><label>Show videos</label></md-checkbox><md-checkbox ng-model="visibilities.I"><label>Show images</label></md-checkbox><md-checkbox ng-model="visibilities.W"><label>Show web pages</label></md-checkbox></div><div><md-input-container style="width: 100%"><span class="media-added__filter-text"><label>Filter media</label> <input ng-model="filterParam" type="text" placeholder="Filter media"></span></md-input-container></div></div><div class="media-added__media"><md-table-container><table md-table=""><thead md-head=""><tr md-row=""><th md-column="">Name</th><th md-column="">Description</th><th md-column="">URL</th><th md-column="">Type</th><th md-column="">Actions</th></tr></thead><tbody md-body=""><tr md-row="" ng-repeat="media in getVisibleMedia()|filter:filterParam"><td md-cell="">{{media.name}}</td><td md-cell="">{{media.description}}</td><td md-cell="">{{media.url}}</td><td md-cell="">{{mediaTypes.labelFor(media.media_type)}}</td><td md-cell=""><md-button class="md-warn" ng-click="removeMedia(media)"><md-icon class="md-icons">clear</md-icon>Remove</md-button></td></tr></tbody></table></md-table-container></div><div><h3>Add external media</h3><form layout="column"><md-input-container><label>Name:</label> <input type="text" ng-model="externalMedia.name"></md-input-container><md-input-container><label>Description:</label> <input type="text" ng-model="externalMedia.description"></md-input-container><md-input-container><label>URL:</label> <input type="text" ng-model="externalMedia.url"></md-input-container><label>Type:</label><md-select ng-model="externalMedia.media_type"><md-option disabled="">Select Type</md-option><md-option ng-repeat="option in mediaTypes.types" value="{{option.fieldName}}">{{option.label}}</md-option></md-select><md-button class="md-raised md-primary" type="submit" ng-click="addExternalMedia(externalMedia)">Add media</md-button></form></div></div><div class="success-message" ng-show="notifier.isSuccessVisible()"><button type="button" class="close" data-ng-click="notifier.hideSuccess()">×</button> <strong>{{notifier.getSuccessMessage()}}</strong></div><div class="failure-message" ng-show="notifier.isFailureVisible()"><button type="button" class="close" data-ng-click="notifier.hideFailure()">×</button> <strong>{{notifier.getFailureMessage()}}</strong></div>'),e.put("app/main/main.html",'<div layout-gt-md="row" layout="column" flex="auto" layout-padding=""><md-card layout-align="center center" ng-repeat="module in main.modules | orderBy:\'rank\'"><md-card-content><md-icon class="material-icons large round-bg">{{module.icon}}</md-icon></md-card-content><md-card-actions class="md-action-buttons"><md-button ng-href="{{ module.url }}">{{ module.description }}</md-button></md-card-actions></md-card></div>'),e.put("app/playlists/playlists.html",'<div layout-padding=""><h3>Playlists</h3><md-table-container><table md-table=""><thead md-head=""><tr md-row=""><th md-column="">Name</th><th md-column="">Description</th><th md-column="">Items</th><th md-column=""></th></tr></thead><tbody md-body=""><tr md-row="" ng-repeat="playlist in playlists.playlists" class="item"><td md-cell="">{{playlist.name}}</td><td md-cell="">{{playlist.description}}</td><td md-cell="">{{playlist.media_schedule.length}}</td><td md-cell=""><md-button class="md-primary" ng-click="editPlaylist(playlist)">Details</md-button></td></tr></tbody></table></md-table-container><md-button class="md-primary md-raised" ng-click="createNewPlaylist()">New playlist</md-button></div>'),e.put("app/stats/stats.html",'<div layout-padding=""><div><select ng-model="selectedDevice" ng-options="device as device.name for device in devices"><option value="" disabled="">Device</option></select></div><div class="media-added__media"><table style="width:auto;" class="table table-bordered"><thead><th>Type</th><th>Category</th><th>Description</th><th>Timestamp</th></thead><tbody ng-repeat="stat in getSelectedStats()"><td>{{getStatTypeString(stat)}}</td><td>{{stat.category}}</td><td>{{stat.description}}</td><td>{{stat.time}}</td></tbody></table></div></div>'),e.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="space-between center" ng-show="vm.getLogin()"><md-button class="md-icon-button" ng-click="vm.toggleSidenav()" hide-gt-md="" aria-label="Menu"><md-icon class="material-icons">menu</md-icon></md-button><md-button hide="" show-gt-md="" href="#/" hide-lt-md="">{{vm.title}}</md-button><span><md-menu md-position-mode="target-right target"><md-button aria-label="Account" ng-click="$mdOpenMenu($event)"><md-icon class="material-icons">account_circle</md-icon>{{vm.getUsername()}}</md-button><md-menu-content width="4"><md-menu-item><md-button href="#/account" ng-click="$mdCloseMenu($event)"><div layout="row"><md-icon class="material-icons">rowing</md-icon>Account</div></md-button></md-menu-item><md-menu-item><md-button href="#/login" ng-click="$mdCloseMenu($event)"><div layout="row"><md-icon class="material-icons">exit_to_app</md-icon>Logout</div></md-button></md-menu-item></md-menu-content></md-menu></span></md-toolbar>'),e.put("app/components/sidenav/sidenav.html",'<md-sidenav class="md-sidenav-left" md-component-id="left" md-is-locked-open="$mdMedia(\'gt-md\')" ng-show="sidenav.getLogin()"><md-toolbar hide-gt-md="" class="md-tall md-hue-2"><md-button class="content-left" hide-gt-md="" ng-click="sidenav.close()" flex=""><md-icon class="material-icons">close</md-icon>Close Navigation</md-button><span flex=""></span><div layout="column" class="md-toolbar-tools-bottom inset"><span></span><div>{{sidenav.title}}</div></div></md-toolbar><md-list><md-item hide-gt-md=""><md-item-content layout="row" layout-align="start center" style="width: 100%"><md-button class="content-left" ng-href="#/" flex=""><md-icon class="material-icons">home</md-icon>Home</md-button></md-item-content></md-item><md-divider hide-gt-md=""></md-divider><md-subheader>Management</md-subheader><md-item ng-repeat="module in sidenav.modules | orderBy:\'rank\'" style="width: 100%"><md-item-content layout="row" layout-align="start center"><md-button class="content-left" ng-href="{{ module.url }}" flex="">{{ module.description }}</md-button></md-item-content></md-item></md-list></md-sidenav>'),e.put("app/templates/toast/toast.html",'<md-toast><span flex="">{{ toast.message }}!</span><md-button ng-click="closeToast()">Close</md-button></md-toast>')}]);
//# sourceMappingURL=../maps/scripts/app-b53a5305e9.js.map
